/*! ultimate-datatable version 3.4.0-SNAPSHOT 2018-08-02 
 Ultimate DataTable is distributed open-source under CeCILL FREE SOFTWARE LICENSE. Check out http://www.cecill.info/ for more information about the contents of this license.
*/
"use strict";angular.module("ultimateDataTableServices",[]).factory("datatable",["$http","$filter","$parse","$window","$q","udtI18n","$timeout","$anchorScroll","$location",function($http,$filter,$parse,$window,$q,udtI18n,$timeout,$anchorScroll,$location){var constructor=function(iConfig){var datatable={configDefault:{name:"datatable",extraHeaders:{number:0,list:{},dynamic:!0},columns:[],columnsUrl:void 0,lines:{trClass:void 0},search:{active:!0,mode:"remote",url:void 0},filter:{active:!1,highlight:!1,columnMode:!1,showButton:!1},pagination:{active:!0,mode:"remote",pageNumber:0,numberPageListMax:3,pageList:[],numberRecordsPerPage:10,numberRecordsPerPageList:void 0,bottom:!0,numberRecordsPerPageForBottomdisplay:50},order:{active:!0,showButton:!0,mode:"remote",by:void 0,reverse:!1,callback:void 0,columns:{}},add:{active:!1,showButton:!0,init:function(){return{}},after:!0},show:{active:!1,showButton:!0,add:function(line){console.log("show : add function is not defined in the controller !!!")}},hide:{active:!1,showButton:!0,byDefault:void 0,columns:{}},edit:{active:!1,withoutSelect:!1,showButton:!0,showLineButton:!1,columnMode:!1,byDefault:!1,start:!1,all:!1,columns:{},lineMode:void 0},save:{active:!1,withoutEdit:!1,keepEdit:!1,showButton:!0,changeClass:!0,mode:"remote",url:void 0,batch:!1,method:"post",value:void 0,callback:void 0,start:!1,number:0,error:0,newData:[],enableValidation:!1},remove:{active:!1,withEdit:!1,showButton:!0,mode:"remote",url:void 0,callback:void 0,start:!1,counter:0,number:0,error:0,ids:{errors:[],success:[]}},select:{active:!0,showButton:!0,isSelectAll:!1,callback:void 0},mouseevents:{active:!1,overCallback:void 0,leaveCallback:void 0,clickCallback:void 0},cancel:{active:!0,showButton:!0},exportCSV:{active:!1,showButton:!0,delimiter:";",start:!1},otherButtons:{active:!1,complex:!1,template:void 0},messages:{active:!1,errorClass:"alert alert-danger",successClass:"alert alert-success",errorKey:{save:"datatable.msg.error.save",remove:"datatable.msg.error.remove"},successKey:{save:"datatable.msg.success.save",remove:"datatable.msg.success.remove"},text:void 0,clazz:void 0,messagesService:udtI18n(navigator.languages||navigator.language||navigator.userLanguage),transformKey:function(key,args){return this.messagesService.Messages(key,args)}},group:{active:!1,callback:void 0,by:void 0,showButton:!0,after:!0,showOnlyGroups:!1,start:!1,enableLineSelection:!1,columns:{}},mergeCells:{active:!1,rowspans:void 0},showTotalNumberRecords:!0,spinner:{start:!1},callbackEndDisplayResult:function(){},compact:!0,objectsMustBeAddInGetFinalValue:{}},config:void 0,configMaster:void 0,allResult:void 0,allGroupResult:void 0,displayResult:void 0,totalNumberRecords:0,computeDisplayResultTimeOut:void 0,urlCache:{},lastSearchParams:void 0,inc:0,configColumnDefault:{edit:!1,hide:!0,order:!0,type:"text",choiceInList:!1,extraHeaders:{},convertValue:{active:!1}},messages:udtI18n(navigator.languages||navigator.language||navigator.userLanguage),resetErrors:function(index){this.displayResult[index].line.errors={}},addErrorsForKey:function(index,data,key){void 0===this.displayResult[index].line.errors&&(this.displayResult[index].line.errors={}),this.displayResult[index].line.errors[key]="";for(var i=0;i<data[key].length;i++)this.displayResult[index].line.errors[key]+=data[key][i]+" "},addErrors:function(index,data){for(var key in data)this.addErrorsForKey(index,data,key)},search:function(params){this.config.edit=angular.copy(this.configMaster.edit),this.config.remove=angular.copy(this.configMaster.remove),this.config.select=angular.copy(this.configMaster.select),this.config.messages=angular.copy(this.configMaster.messages),this.config.pagination.pageNumber=0,this._search(angular.copy(params))},searchLocal:function(searchTerms){if(this.config.filter.active===!0){this.setSpinner(!0);for(var p in searchTerms)void 0==searchTerms[p]||void 0!==searchTerms[p]&&null!==searchTerms[p]&&""!==searchTerms[p]||(searchTerms[p]=void 0);var _allResult=angular.copy(this.allResult);_allResult=$filter("filter")(this.allResult,searchTerms,!1),this._getAllResult=function(){return _allResult},this.totalNumberRecords=_allResult.length,this.computePaginationList(),this.computeDisplayResult();var that=this;this.computeDisplayResultTimeOut.then(function(){that.setSpinner(!1)})}},_getAllResult:function(){return this.allResult},_search:function(params){if(this.config.search.active&&this.isRemoteMode(this.config.search.mode)){this.lastSearchParams=params;var url=this.getUrlFunction(this.config.search.url);if(!url)throw"no url define for search ! ";this.setSpinner(!0);var that=this;$http.get(url(),{params:this.getParams(params),datatable:this}).then(function(resp){angular.isArray(resp.data)?resp.config.datatable._setData(resp.data,resp.data.length):resp.config.datatable._setData(resp.data.data,resp.data.recordsNumber),that.computeDisplayResultTimeOut.then(function(){that.setSpinner(!1)})})}},searchWithLastParams:function(){this._search(this.lastSearchParams)},setData:function(data,recordsNumber){this.config.edit=angular.copy(this.configMaster.edit),this.config.remove=angular.copy(this.configMaster.remove),this.config.select=angular.copy(this.configMaster.select),this.config.messages=angular.copy(this.configMaster.messages),this.config.pagination.pageNumber=0,this._setData(data,recordsNumber)},_setData:function(data,recordsNumber){var configPagination=this.config.pagination;configPagination.active&&!this.isRemoteMode(configPagination.mode)&&(this.config.pagination.pageNumber=0),void 0===recordsNumber&&null!==data&void 0!==data&&(recordsNumber=data.length),this.allResult=data,this.totalNumberRecords=recordsNumber,this.loadUrlColumnProperty(),this.computeGroup(),this.sortAllResult(),this.computePaginationList(),this.computeDisplayResult(),this._getAllResult=function(){return this.allResult}},getData:function(){return this.allResult},addData:function(data){if(!angular.isUndefined(data)&&angular.isArray(data)&&data.length>0){var configPagination=this.config.pagination;configPagination.active&&!this.isRemoteMode(configPagination.mode)&&(this.config.pagination.pageNumber=0);for(var i=0;i<data.length;i++)this.allResult.push(data[i]);this.totalNumberRecords=this.allResult.length,this.loadUrlColumnProperty(),this.computeGroup(),this.sortAllResult(),this.computePaginationList(),this.computeDisplayResult(),this._getAllResult=function(){return this.allResult}}},addBlankLine:function(){if(this.config.add.active===!0){var newData=this.config.add.init(this),line={edit:!0,selected:!1,trClass:void 0,group:!1,"new":!0};this.config.add.after?this.displayResult.push({data:newData,line:line}):this.displayResult.unshift({data:newData,line:line}),this.config.edit.all=!0,this.config.edit.start=!0}},computeGroup:function(){if(this.config.group.active&&this.config.group.by){var propertyGroupGetter=this.config.group.by.property,propertyGroupGetterWithoutFormat=propertyGroupGetter+this.getFilter(this.config.group.by),propertyGroupGetterWithFormat=propertyGroupGetterWithoutFormat+this.getFormatter(this.config.group.by),groupContext={col:this.config.group.by};groupContext=Object.assign(groupContext,this.config.objectsMustBeAddInGetFinalValue),"all"==this.config.group.by&&(propertyGroupGetterWithFormat="all");var groupGetter=$parse(propertyGroupGetterWithFormat),groupValues=this.allResult.reduce(function(array,value){var groupValue="all";return"all"!==propertyGroupGetterWithFormat&&(groupValue=groupGetter(value,groupContext),groupValue=null!==groupValue&&void 0!==groupValue?groupValue.toString():""),array[groupValue]||(array[groupValue]=[]),array[groupValue].push(value),array},{}),groups={};this.allGroupResult=[];for(var key in groupValues){var group={},groupData=groupValues[key],keyFirstElementValue=$parse(propertyGroupGetterWithoutFormat)(groupData[0],groupContext),that=this;$parse("group."+this.config.group.by.id).assign(group,keyFirstElementValue);var groupMethodColumns=this.getColumnsConfig().filter(function(column){return void 0!==column.groupMethod&&null!==column.groupMethod&&column.property+that.getFilter(column)!=propertyGroupGetterWithoutFormat});groupMethodColumns.forEach(function(column){if(column.id!=that.config.group.by.id){var propertyGetter=column.property,propertyGetterWithoutFormat=propertyGetter+that.getFilter(column),columnGetterWithoutFomat=$parse(propertyGetterWithoutFormat),propertyGetterWithFormat=propertyGetterWithoutFormat+that.getFormatter(column),columnSetter=($parse(propertyGetterWithFormat),$parse("group."+column.id)),context={col:column};if(context=Object.assign(context,this.config.objectsMustBeAddInGetFinalValue),"sum"===column.groupMethod||"average"===column.groupMethod){var result=groupData.reduce(function(value,element){return element.col=column,value+=columnGetterWithoutFomat(element,context),element.col=void 0,value},0);"average"===column.groupMethod&&(result/=groupData.length),isNaN(result)&&(result="#ERROR");try{columnSetter.assign(group,result)}catch(e){console.log("computeGroup Error : "+e)}}else if("unique"===column.groupMethod){var result=$filter("udtUnique")(groupData,propertyGetterWithFormat,context);result=angular.isArray(result)?angular.isArray(result)&&result.length>1?"#MULTI":angular.isArray(result)&&1===result.length?columnGetterWithoutFomat(result[0]):void 0:columnGetterWithoutFomat(result),columnSetter.assign(group,result)}else if("countDistinct"===column.groupMethod){var result=$filter("udtCount")(groupData,propertyGetterWithFormat,!0,context);columnSetter.assign(group,result)}else if(column.groupMethod.startsWith("count")){var params=column.groupMethod.split(":"),distinct=2===params.length&&"true"===params[1]?!0:!1,result=$filter("udtCount")(groupData,propertyGetterWithFormat,distinct,context);columnSetter.assign(group,result)}else if(column.groupMethod.startsWith("collect")){var params=column.groupMethod.split(":"),unique=2===params.length&&"true"===params[1]?!0:!1,result=$filter("udtCollect")(groupData,propertyGetterWithoutFormat,unique,"this"+that.getFormatter(column),context);angular.isArray(result)&&1===result.length&&(result=result[0]),columnSetter.assign(group,result)}else console.error("groupMethod is not managed "+column.groupMethod)}},this),groups[key]=group,this.allGroupResult.push(group)}this.config.group.data=groups}else this.config.group.data=void 0,this.allGroupResult=void 0},getGroupColumnValue:function(groupValue,columnProperty){for(var i=0;i<this.config.columns.length;i++)if(this.config.columns[i].property===columnProperty){var column=this.config.columns[i],columnGetter=$parse("group."+column.id);return columnGetter(groupValue)}return void console.log("column not found for property :"+columnProperty)},isGroupActive:function(){return this.config.group.active&&this.config.group.start},setGroupColumn:function(column){if(this.config.group.active){var columnId;if(columnId="all"===column?"all":column.id,void 0===this.config.group.by||this.config.group.by.id!==column.id){this.config.group.start=!0,"all"===columnId?(this.config.group.by=columnId,this.config.group.columns.all=!0):(this.config.group.by=column,this.config.order.groupReverse=!1,this.config.group.columns[columnId]=!0,this.config.group.columns.all&&(this.config.group.columns.all=!1));for(var i=0;i<this.config.columns.length;i++)this.config.columns[i].id===columnId?this.config.group.columns[this.config.columns[i].id]=!0:this.config.group.columns[this.config.columns[i].id]=!1}else this.config.group.columns[columnId]=!this.config.group.columns[columnId],(!this.config.group.columns[columnId]||this.config.group.columns.all)&&(this.config.group.by=void 0,this.config.group.columns.all=!1),this.config.group.start=!1;this.config.edit.active&&this.config.edit.start&&(console.log("edit is active, you lost all modification !!"),this.config.edit=angular.copy(this.configMaster.edit)),this.computeGroup(),this.sortAllResult(),this.computePaginationList(),this.computeDisplayResult();var that=this;this.computeDisplayResultTimeOut.then(function(){angular.isFunction(that.config.group.callback)&&that.config.group.callback(this)})}},updateShowOnlyGroups:function(){this.sortAllResult(),this.computePaginationList(),this.computeDisplayResult()},getGroupColumnClass:function(columnId){return this.config.group.active?this.config.group.columns[columnId]?"fa fa-outdent":"fa fa-bars":void 0},addGroup:function(displayResultTmp){var displayResult=[],propertyGroupGetter=this.config.group.by.property;propertyGroupGetter+=this.getFilter(this.config.group.by),propertyGroupGetter+=this.getFormatter(this.config.group.by),"all"==this.config.group.by&&(propertyGroupGetter="all");var groupGetter=$parse(propertyGroupGetter),getGroupValue=function(value){var groupValue=groupGetter(value);return groupValue=null!==groupValue&&void 0!==groupValue?groupValue.toString():""},groupConfig=this.config.group;return displayResultTmp.forEach(function(element,index,array){if(!groupConfig.after&&(0===index||"all"!==propertyGroupGetter&&getGroupValue(element.data).toString()!==getGroupValue(array[index-1].data).toString())){var line={edit:void 0,selected:void 0,trClass:void 0,group:!0,"new":!1};this.push({data:"all"!==propertyGroupGetter?groupConfig.data[getGroupValue(element.data).toString()]:groupConfig.data.all,line:line})}if(this.push(element),groupConfig.after&&(index===array.length-1||"all"!==propertyGroupGetter&&getGroupValue(element.data).toString()!==getGroupValue(array[index+1].data).toString())){var line={edit:void 0,selected:void 0,trClass:void 0,group:!0,"new":!1};this.push({data:"all"!==propertyGroupGetter?groupConfig.data[getGroupValue(element.data).toString()]:groupConfig.data.all,line:line})}},displayResult),displayResult},computeRowSpans:function(){if(this.config.mergeCells.active===!0){this.config.mergeCells.rowspans=void 0;var rowspans=void 0;rowspans=new Array(this.displayResult.length);for(var i=0;i<this.displayResult.length;i++)rowspans[i]=new Array(this.config.columns.length);for(var currentDisplayResult=this.displayResult,currentColumns=this.config.columns,previousResult=void 0,nbRowEquals=new Array(this.config.columns.length),j=0;j<nbRowEquals.length;j++)nbRowEquals[j]=0;var that=this,getColumnValue=function(column,result){var colValue=that.getFinalValue(column,result);return colValue=that.cleanColValue(column,colValue)};currentDisplayResult.forEach(function(result,i){currentColumns.forEach(function(column,j){if(i>0&&column.mergeCells){var currentColValue=getColumnValue(column,result),previousColValue=getColumnValue(column,previousResult);currentColValue===previousColValue?(rowspans[i][j]=0,nbRowEquals[j]++,i===currentDisplayResult.length-1&&(rowspans[i-nbRowEquals[j]][j]=nbRowEquals[j]+1)):(rowspans[i][j]=1,rowspans[i-(nbRowEquals[j]+1)][j]=nbRowEquals[j]+1,nbRowEquals[j]=0)}else 0===i&&(rowspans[i][j]=1)},this),previousResult=result},this),this.config.mergeCells.rowspans=rowspans}},computeDisplayResult:function(){var time=100;void 0!==this.computeDisplayResultTimeOut?$timeout.cancel(this.computeDisplayResultTimeOut):time=0;var that=this;this.computeDisplayResultTimeOut=$timeout(function(){var configPagination=that.config.pagination,_displayResult=[];if(that.config.group.start&&that.config.group.showOnlyGroups){_displayResult=that.allGroupResult.slice(configPagination.pageNumber*configPagination.numberRecordsPerPage,configPagination.pageNumber*configPagination.numberRecordsPerPage+configPagination.numberRecordsPerPage);var displayResultTmp=[];angular.forEach(_displayResult,function(value,key){var line={edit:that.config.edit.start?!0:void 0,selected:void 0,trClass:void 0,group:!0,"new":!1};this.push({data:value,line:line})},displayResultTmp),that.displayResult=displayResultTmp}else{_displayResult=configPagination.active&&!that.isRemoteMode(configPagination.mode)?$.extend(!0,[],that._getAllResult().slice(configPagination.pageNumber*configPagination.numberRecordsPerPage,configPagination.pageNumber*configPagination.numberRecordsPerPage+configPagination.numberRecordsPerPage)):$.extend(!0,[],that._getAllResult());var displayResultTmp=[],id=0;angular.forEach(_displayResult,function(value,key){var line={edit:that.config.edit.start?!0:void 0,selected:void 0,trClass:void 0,group:!1,"new":!1,id:id++};this.push({data:value,line:line})},displayResultTmp),that.config.mergeCells.rowspans=void 0,that.isGroupActive()?that.displayResult=that.addGroup(displayResultTmp):(that.displayResult=displayResultTmp,that.computeRowSpans()),that.config.edit.byDefault&&that.setEdit(),angular.isFunction(that.config.callbackEndDisplayResult)&&that.config.callbackEndDisplayResult()}},time)},loadUrlColumnProperty:function(){var urlColumns=this.getColumnsConfig().filter(function(column){return void 0!==column.url&&null!==column.url}),displayResult=this.allResult,urlQueries=[],urlCache=this.urlCache={};urlColumns.forEach(function(column){displayResult.forEach(function(value){var url=$parse(column.url)(value);angular.isDefined(urlCache[url])||(urlCache[url]="in waiting data ...",urlQueries.push($http.get(url,{url:url}).then(function(result){urlCache[result.config.url]=result.data},function(result){urlCache[result.config.url]="Error for load column property : "+result.config.url})))})}),$q.all(urlQueries)},computePaginationList:function(){var configPagination=this.config.pagination;if(configPagination.active){configPagination.pageList=[];var currentPageNumber=configPagination.pageNumber,nbPages=Math.ceil(this.totalNumberRecords/configPagination.numberRecordsPerPage);if(this.config.group.active&&this.config.group.start&&this.config.group.showOnlyGroups&&(nbPages=Math.ceil(this.allGroupResult.length/configPagination.numberRecordsPerPage)),currentPageNumber>nbPages-1&&(configPagination.pageNumber=0,currentPageNumber=0),nbPages>1&&nbPages<=configPagination.numberPageListMax)for(var i=0;nbPages>i;i++)configPagination.pageList.push({number:i,label:i+1,clazz:i!=currentPageNumber?"":"active"});else if(nbPages>configPagination.numberPageListMax){var min=currentPageNumber-(configPagination.numberPageListMax-1)/2,max=currentPageNumber+(configPagination.numberPageListMax-1)/2+1;for(0>min?min=0:min>nbPages-configPagination.numberPageListMax&&(min=nbPages-configPagination.numberPageListMax),max<configPagination.numberPageListMax?max=configPagination.numberPageListMax:max>nbPages&&(max=nbPages),configPagination.pageList.push({number:0,label:"<<",clazz:currentPageNumber!=min?"":"disabled"}),configPagination.pageList.push({number:currentPageNumber-1,label:"<",clazz:currentPageNumber!=min?"":"disabled"});max>min;min++)configPagination.pageList.push({number:min,label:min+1,clazz:min!=currentPageNumber?"":"active"});configPagination.pageList.push({number:currentPageNumber+1,label:">",clazz:currentPageNumber!=max-1?"":"disabled"}),configPagination.pageList.push({number:nbPages-1,label:">>",clazz:currentPageNumber!=max-1?"":"disabled"})}}},setSpinner:function(value){this.config.spinner.start=value},setNumberRecordsPerPage:function(numberRecordsPerPageElement){if(this.config.pagination.active&&angular.isObject(numberRecordsPerPageElement)){this.config.pagination.numberRecordsPerPage=numberRecordsPerPageElement.number,numberRecordsPerPageElement.clazz="active";for(var i=0;i<this.config.pagination.numberRecordsPerPageList.length;i++)this.config.pagination.numberRecordsPerPageList[i].number!=numberRecordsPerPageElement.number&&(this.config.pagination.numberRecordsPerPageList[i].clazz="");this.config.edit.active&&this.config.edit.start&&(console.log("edit is active, you lost all modification !!"),this.config.edit=angular.copy(this.configMaster.edit)),this.config.pagination.pageNumber=0,this.isRemoteMode(this.config.pagination.mode)?this.searchWithLastParams():(this.computePaginationList(),this.computeDisplayResult())}},setPageNumber:function(page){this.config.pagination.active&&angular.isObject(page)&&""===page.clazz&&(this.config.edit.active&&this.config.edit.start&&(console.log("edit is active, you lost all modification !!"),this.config.edit=angular.copy(this.configMaster.edit)),this.config.pagination.pageNumber=page.number,this.isRemoteMode(this.config.pagination.mode)?this.searchWithLastParams():(this.computePaginationList(),this.computeDisplayResult()))},sortAllResult:function(){if(this.config.order.active&&!this.isRemoteMode(this.config.order.mode)){var orderBy=[];if(this.config.group.active&&this.config.group.start&&"all"!==this.config.group.by)if(this.config.group.showOnlyGroups){if(angular.isDefined(this.config.order.by)){var orderProperty="group."+this.config.order.by.id,orderSense=this.config.order.reverse?"-":"+";orderBy.push(orderSense+orderProperty)}this.allGroupResult=$filter("orderBy")(this.allGroupResult,orderBy)}else{var orderGroupSense=this.config.order.groupReverse?"-":"+";if(orderBy.push(orderGroupSense+this.config.group.by.property),angular.isDefined(this.config.order.by)){var orderProperty=this.config.order.by.property;orderProperty+=this.config.order.by.filter?"|"+this.config.order.by.filter:"";var orderSense=this.config.order.reverse?"-":"+";orderBy.push(orderSense+orderProperty)}this.allResult=$filter("orderBy")(this.allResult,orderBy)}else if(angular.isDefined(this.config.order.by)){if(angular.isDefined(this.config.order.by)){var orderProperty=this.config.order.by.property;orderProperty+=this.config.order.by.filter?"|"+this.config.order.by.filter:"";var orderSense=this.config.order.reverse?"-":"+";orderBy.push(orderSense+orderProperty)}this.allResult=$filter("orderBy")(this.allResult,orderBy)}}},setOrderColumn:function(column){if(this.config.order.active){var columnId=column.id;if(angular.isDefined(this.config.group.by)&&this.config.group.by.id===columnId&&!this.config.group.showOnlyGroups)this.config.order.groupReverse=!this.config.order.groupReverse;else{angular.isDefined(this.config.order.by)&&this.config.order.by.id===columnId?this.config.order.reverse=!this.config.order.reverse:(this.config.order.by=column,this.config.order.reverse=!1);for(var i=0;i<this.config.columns.length;i++)this.config.columns[i].id===columnId?this.config.order.columns[this.config.columns[i].id]=!0:this.config.order.columns[this.config.columns[i].id]=!1;this.config.edit.active&&this.config.edit.start&&(console.log("edit is active, you lost all modification !!"),this.config.edit=angular.copy(this.configMaster.edit))}this.isRemoteMode(this.config.order.mode)?this.config.order.active&&this.searchWithLastParams():(this.sortAllResult(),this.computeDisplayResult());var that=this;this.computeDisplayResultTimeOut.then(function(){angular.isFunction(that.config.order.callback)&&that.config.order.callback(this)})}},getOrderColumnClass:function(columnId){if(this.config.order.active){if(angular.isDefined(this.config.group.by)&&this.config.group.by.id===columnId&&!this.config.group.showOnlyGroups)return this.config.order.groupReverse?"fa fa-sort-down":"fa fa-sort-up";if(!this.config.order.columns[columnId])return"fa fa-sort";if(this.config.order.columns[columnId]&&!this.config.order.reverse)return"fa fa-sort-up";if(this.config.order.columns[columnId]&&this.config.order.reverse)return"fa fa-sort-down"}},canOrder:function(){return this.config.edit.active?!this.config.edit.start:this.config.order.active&&!this.isEmpty()},show:function(){this.config.show.active&&angular.isFunction(this.config.show.add)&&angular.forEach(this.displayResult,function(value,key){value.line.selected&&this.config.show.add(value.data)},this)},setHideColumn:function(column){if(this.config.hide.active){var columnId=column.id;this.config.hide.columns[columnId]?this.config.hide.columns[columnId]=!1:this.config.hide.columns[columnId]=!0,this.newExtraHeaderConfig()}},isGroup:function(columnId){return this.config.group.active&&this.config.group.columns[columnId]?this.config.group.columns[columnId]:!1},isHide:function(columnId){return this.config.hide.active&&this.config.hide.columns[columnId]?this.config.hide.columns[columnId]:!1},setEdit:function(column){if(this.config.edit.active){var that=this;this.computeDisplayResultTimeOut.then(function(){that._getAllResult=function(){return that.allResult},that.config.edit.columns={};for(var find=!1,i=0;i<that.displayResult.length;i++)(that.displayResult[i].line.selected||that.config.edit.withoutSelect||that.config.edit.byDefault)&&(angular.isUndefined(that.config.edit.lineMode)||angular.isFunction(that.config.edit.lineMode)&&that.config.edit.lineMode(that.displayResult[i].data))?(that.displayResult[i].line.edit=!0,find=!0):that.displayResult[i].line.edit=!1;if(that.selectAll(!1),find)if(that.config.edit.start=!0,column){that.config.edit.all=!1;var columnId=column.id;angular.isUndefined(that.config.edit.columns[columnId])&&(that.config.edit.columns[columnId]={}),that.config.edit.columns[columnId].edit=!0}else that.config.edit.all=!0})}},isEdit:function(columnId,line){var isEdit=!1;if(this.config.edit.active)if(columnId&&line){angular.isUndefined(this.config.edit.columns[columnId])&&(this.config.edit.columns[columnId]={});var columnEdit=this.config.edit.columns[columnId].edit;isEdit=line.edit&&columnEdit||line.edit&&this.config.edit.all}else if(columnId){angular.isUndefined(this.config.edit.columns[columnId])&&(this.config.edit.columns[columnId]={});var columnEdit=this.config.edit.columns[columnId].edit;isEdit=columnEdit||this.config.edit.all}else if(line)isEdit=line.edit&&this.config.edit.all;else{var nbEditableColumns=$filter("filter")(this.config.columns,{edit:!0}).length;isEdit=this.config.edit.columnMode&&this.config.edit.start&&nbEditableColumns>0}return isEdit},canEdit:function(){return this.config.edit.withoutSelect?!0:this.isSelect()},updateColumn:function(columnPropertyName,columnId){if(this.config.edit.active&&void 0!==this.config.edit.columns[columnId].value)for(var getter=$parse(columnPropertyName),i=0;i<this.displayResult.length;i++)this.displayResult[i].line.edit&&getter.assign(this.displayResult[i].data,this.config.edit.columns[columnId].value)},save:function(){if(this.config.save.active&&this.displayResult)if(this.formController.$invalid)this.config.save.enableValidation=!0;else{this.config.save.number=0,this.config.save.error=0,this.config.save.start=!0,this.setSpinner(!0),this.config.messages.text=void 0,this.config.messages.clazz=void 0;for(var data=[],valueFunction=this.getValueFunction(this.config.save.value),i=0;i<this.displayResult.length;i++)(this.displayResult[i].line.edit||this.config.save.withoutEdit)&&(this.config.save.number++,this.displayResult[i].line.trClass=void 0,this.displayResult[i].line.selected=void 0,this.resetErrors(i),this.isRemoteMode(this.config.save.mode)&&!this.config.save.batch?data.push(this.getSaveRemoteRequest(this.displayResult[i].data,i)):this.isRemoteMode(this.config.save.mode)&&this.config.save.batch?data.push({index:i,data:valueFunction(this.displayResult[i].data)}):this.saveLocal(valueFunction(this.displayResult[i].data),i));this.isRemoteMode(this.config.save.mode)&&0!==data.length?this.isRemoteMode(this.config.save.mode)&&!this.config.save.batch?this.saveRemote(data):this.isRemoteMode(this.config.save.mode)&&this.config.save.batch&&this.saveBatchRemote(data):this.saveFinish()}},saveBatchRemote:function(values){for(var nbElementByBatch=Math.ceil(values.length/6),queries=[],i=0;6>i&&values.length>0;i++)queries.push(this.getSaveRemoteRequest(values.splice(0,nbElementByBatch)));$q.all(queries).then(function(results){angular.forEach(results,function(result,key){200!==result.status?console.log("Error for batch save"):angular.forEach(result.data,function(value,key){this.datatable.saveRemoteOneElement(value.status,value.data,value.index)},result.config)})})},saveRemote:function(queries){$q.all(queries).then(function(results){angular.forEach(results,function(value,key){value.config.datatable.saveRemoteOneElement(value.status,value.data,value.config.index)})})},saveRemoteOneElement:function(status,value,index){200!==status?(this.config.save.changeClass&&(this.displayResult[index].line.trClass="danger"),this.displayResult[index].line.edit=!0,this.addErrors(index,value),this.config.save.error++,this.config.save.number--,this.saveFinish()):(this.resetErrors(index),this.saveLocal(value,index),this.saveFinish())},getSaveRemoteRequest:function(value,i){var urlFunction=this.getUrlFunction(this.config.save.url),method=this.config.save.method;angular.isFunction(method)&&(method=method(value));var httpConfig={datatable:this};if(angular.isObject(this.config.save.httpConfig)&&angular.merge(httpConfig,this.config.save.httpConfig),urlFunction){if(this.config.save.batch)return $http[method](urlFunction(value),value,httpConfig);var valueFunction=this.getValueFunction(this.config.save.value);return httpConfig.index=i,$http[method](urlFunction(value),valueFunction(value),httpConfig).then(function(resp){return resp.config.datatable.saveRemoteOneElement(resp.status,resp.data,resp.config.index),resp},function(resp){return resp.config.datatable.saveRemoteOneElement(resp.status,resp.data,resp.config.index),resp})}throw"no url define for save !"},saveLocal:function(data,i){if(this.config.save.active){if(data&&(this.displayResult[i].data=data),this.displayResult[i].line["new"])this.config.save.newData.push(data);else{var j=i;this.config.pagination.active&&!this.isRemoteMode(this.config.pagination.mode)&&(j=i+this.config.pagination.pageNumber*this.config.pagination.numberRecordsPerPage),this.allResult[j]=$.extend(!0,{},this.displayResult[i].data)}this.config.save.keepEdit?this.displayResult[i].line.edit=!0:this.displayResult[i].line.edit=void 0,this.config.save.changeClass&&(this.displayResult[i].line.trClass="success"),this.config.save.number--}},saveFinish:function(){0===this.config.save.number&&(this.config.save.error>0?(this.config.messages.clazz=this.config.messages.errorClass,this.config.messages.text=this.config.messages.transformKey(this.config.messages.errorKey.save,this.config.save.error)):(this.config.messages.clazz=this.config.messages.successClass,this.config.messages.text=this.config.messages.transformKey(this.config.messages.successKey.save)),angular.isFunction(this.config.save.callback)&&this.config.save.callback(this,this.config.save.error),this.config.save.keepEdit||0!==this.config.save.error||(this.config.edit.start=!1),this.config.save.error=0,this.config.save.start=!1,this.config.save.newData.length>0&&this.addData(this.config.save.newData),this.config.save.newData=[],this.config.save.enableValidation=!1,this.setSpinner(!1))},canSave:function(){return!this.config.edit.active||this.config.save.withoutEdit||this.config.save.start?this.config.edit.active&&this.config.save.withoutEdit&&!this.config.save.start?!0:!1:this.config.edit.start},remove:function(){if(this.config.remove.active&&!this.config.remove.start){var r=$window.confirm(this.messages.Messages("datatable.remove.confirm"));if(r){this.setSpinner(!0),this.config.messages.text=void 0,this.config.messages.clazz=void 0,this.config.remove.counter=0,this.config.remove.start=!0,this.config.remove.number=0,this.config.remove.error=0,this.config.remove.ids={errors:[],success:[]};for(var i=0;i<this.displayResult.length;i++)!this.displayResult[i].line.selected||this.displayResult[i].line.edit&&!this.config.remove.withEdit||(this.isRemoteMode(this.config.remove.mode)?(this.config.remove.number++,this.removeRemote(this.displayResult[i].data,i)):this.config.remove.ids.success.push(i));this.isRemoteMode(this.config.remove.mode)||this.removeFinish()}}},removeLocal:function(i){if(this.config.remove.active&&this.config.remove.start){var j;j=this.config.pagination.active&&!this.isRemoteMode(this.config.pagination.mode)?i+this.config.pagination.pageNumber*this.config.pagination.numberRecordsPerPage-this.config.remove.counter:i-this.config.remove.counter,this.allResult.splice(j,1),this.config.remove.counter++,this.totalNumberRecords--}},removeRemote:function(value,i){var url=this.getUrlFunction(this.config.remove.url);if(url)return $http["delete"](url(value),{datatable:this,index:i,value:value}).then(function(resp){return resp.config.datatable.config.remove.ids.success.push(resp.config.index),
resp.config.datatable.config.remove.number--,resp.config.datatable.removeFinish(),resp},function(resp){return resp.config.datatable.config.remove.ids.errors.push(resp.config.value),resp.config.datatable.config.remove.error++,resp.config.datatable.config.remove.number--,resp.config.datatable.removeFinish(),resp});throw"no url define for save !"},removeFinish:function(){if(0===this.config.remove.number){this.config.remove.ids.success.sort(function(a,b){return a-b}).forEach(function(i){this.removeLocal(i)},this),this.config.remove.error>0?(this.config.messages.clazz=this.config.messages.errorClass,this.config.messages.text=this.config.messages.transformKey(this.config.messages.errorKey.remove,this.config.remove.error)):(this.config.messages.clazz=this.config.messages.successClass,this.config.messages.text=this.config.messages.transformKey(this.config.messages.successKey.remove)),angular.isFunction(this.config.remove.callback)&&this.config.remove.callback(this,this.config.remove.error),this.computePaginationList(),this.computeDisplayResult();var that=this;this.computeDisplayResultTimeOut.then(function(){that.config.remove.ids.errors.length>0&&that.displayResult.every(function(value,index){for(var errors=that.config.remove.ids.errors,i=0;i<errors.length;i++)if(angular.equals(value.data,errors[i])){value.line.trClass="danger",errors.splice(i,1);break}return 0===errors.length?!1:!0},that),that.config.select.isSelectAll=!1,that.config.remove.error=0,that.config.remove.start=!1,that.config.remove.counter=0,that.config.remove.ids={error:[],success:[]},that.setSpinner(!1)})}},canRemove:function(){if(!this.config.remove.active||this.config.remove.start)return!1;for(var i=0;this.displayResult&&i<this.displayResult.length;i++)if(this.displayResult[i].line.selected&&(!this.displayResult[i].line.edit||this.config.remove.withEdit))return!0},selectAll:function(value){if(this.config.select.active&&this.displayResult){this.config.select.isSelectAll=value;for(var i=0;i<this.displayResult.length;i++)value?this.displayResult[i].line.group?this.displayResult[i].line.group&&this.config.group.enableLineSelection&&(this.displayResult[i].line.groupSelected=!0,this.displayResult[i].line.trClass="info"):(this.displayResult[i].line.selected=!0,this.displayResult[i].line.trClass="info"):this.displayResult[i].line.group?this.displayResult[i].line.group&&this.config.group.enableLineSelection&&(this.displayResult[i].line.groupSelected=!1,this.displayResult[i].line.trClass=void 0):(this.displayResult[i].line.selected=!1,this.displayResult[i].line.trClass=void 0),angular.isFunction(this.config.select.callback)&&this.config.select.callback(this.displayResult[i].line,this.displayResult[i].data)}},getSelection:function(unselect){for(var selection=[],i=0;i<this.displayResult.length;i++)this.displayResult[i].line.selected?(unselect&&(this.displayResult[i].line.selected=!1,this.displayResult[i].line.trClass=void 0),selection.push($.extend(!0,{},this.displayResult[i].data))):this.displayResult[i].line.groupSelected&&(unselect&&(this.displayResult[i].line.groupSelected=!1,this.displayResult[i].line.trClass=void 0),selection.push($.extend(!0,{},this.displayResult[i].data)));return unselect&&(this.config.select.isSelectAll=!1),selection},isSelect:function(){for(var i=0;this.displayResult&&i<this.displayResult.length;i++)if(this.displayResult[i].line.selected)return!0;return!1},isSelectGroup:function(){for(var i=0;this.displayResult&&i<this.displayResult.length;i++)if(this.displayResult[i].line.groupSelected)return!0;return!1},cancel:function(){this.config.cancel.active&&(this.config.edit=angular.copy(this.configMaster.edit),this.config.edit.byDefault=!1,this.config.save=angular.copy(this.configMaster.save),this.config.hide=angular.copy(this.configMaster.hide),this.config.remove=angular.copy(this.configMaster.remove),this.config.select=angular.copy(this.configMaster.select),this.config.messages=angular.copy(this.configMaster.messages),this.totalNumberRecords=this.allResult.length,this.setHideColumnByDefault(),this.newExtraHeaderConfig(),this.computePaginationList(),this.computeDisplayResult())},isShowToolbar:function(){return this.isShowToolbarButtons()||this.isShowToolbarPagination()||this.isShowToolbarResults()},isShowToolbarBottom:function(){return this.isShowToolbarPagination()&&this.config.pagination.bottom&&this.config.pagination.numberRecordsPerPage>=this.config.pagination.numberRecordsPerPageForBottomdisplay},isShowToolbarButtons:function(){return this.isShowCRUDButtons()||this.isShowHideButtons()||this.isShowAddButtons()||this.isShowShowButtons()||this.isShowExportCSVButton()||this.isShowOtherButtons()},isShowCRUDButtons:function(){return this.config.edit.active&&this.config.edit.showButton||this.config.save.active&&this.config.save.showButton||this.config.remove.active&&this.config.remove.showButton},isShowAddButtons:function(){return this.config.add.active&&this.config.add.showButton},isShowShowButtons:function(){return this.config.show.active&&this.config.show.showButton},isShowHideButtons:function(){return this.config.hide.active&&this.config.hide.showButton&&this.getHideColumns().length>0},isShowOtherButtons:function(){return this.config.otherButtons.active&&void 0!==this.config.otherButtons.template},isShowToolbarPagination:function(){return this.config.pagination.active},isShowPagination:function(){return this.config.pagination.active&&this.config.pagination.pageList.length>0},isShowToolbarResults:function(){return this.config.showTotalNumberRecords},isCompactMode:function(){return this.config.compact},isEmpty:function(){return void 0===this.allResult||null===this.allResult||0===this.allResult.length},goToAnchor:function(hash){$anchorScroll.yOffset=50,$location.hash()!==hash?$location.hash(hash):$anchorScroll()},isShowExportCSVButton:function(){return this.config.exportCSV.active&&this.config.exportCSV.showButton},isShowButton:function(configParam,column){return column?this.config[configParam].active&&(void 0!==this.config[configParam].showButtonColumn&&this.config[configParam].showButtonColumn||this.config[configParam].showButton)&&column[configParam]:this.config[configParam].active&&this.config[configParam].showButton},isShowLineEditButton:function(){return this.config.edit.active&&this.config.edit.showLineButton},setShowButton:function(configParam,value){this.config[configParam].active&&(this.config[configParam].showButton=value)},getParams:function(params){return angular.isUndefined(params)&&(params={}),params.datatable=!0,this.config.pagination.active&&(params.paginationMode=this.config.pagination.mode,this.isRemoteMode(this.config.pagination.mode)&&(params.pageNumber=this.config.pagination.pageNumber,params.numberRecordsPerPage=this.config.pagination.numberRecordsPerPage)),this.config.order.active&&this.isRemoteMode(this.config.order.mode)&&angular.isDefined(this.config.order.by)&&(params.orderBy=this.config.order.by.property,params.orderSense=this.config.order.reverse?"-1":"1"),params},getUrlFunction:function(url){if(angular.isObject(url)){if(angular.isDefined(url.url))return function(value){return url.url}}else{if(angular.isString(url))return function(value){return url};if(angular.isFunction(url))return url}return void 0},getValueFunction:function(valueFunction){return angular.isFunction(valueFunction)?valueFunction:function(value){return value}},isRemoteMode:function(mode){return mode&&"remote"===mode?!0:!1},setHideColumnByDefault:function(){this.config.hide.active&&angular.isDefined(this.config.hide.byDefault)&&(angular.isArray(this.config.hide.byDefault)||(this.config.hide.byDefault=[this.config.hide.byDefault]),angular.forEach(this.config.columns,function(column,key){angular.forEach(this.config.hide.byDefault,function(value,key){value===column.property&&this.setHideColumn(column)},this)},this))},setColumnsConfig:function(columns){if(angular.isDefined(columns)){for(var initPosition=1e6,i=0;i<columns.length;i++){if(columns[i].type&&"string"!==columns[i].type.toLowerCase()?columns[i].type=columns[i].type.toLowerCase():columns[i].type="text",("img"===columns[i].type||"image"===columns[i].type)&&(columns[i].format||console.log("missing format for "+columns[i].property),columns[i].width||(columns[i].width="100%")),columns[i].id=this.generateColumnId(),columns[i].choiceInList&&!angular.isDefined(columns[i].listStyle)&&(columns[i].listStyle="select"),columns[i].choiceInList&&!angular.isDefined(columns[i].possibleValues)&&(columns[i].possibleValues=[]),this.config.group.active&&angular.isDefined(this.config.group.by)&&(columns[i].property===this.config.group.by||columns[i].property===this.config.group.by.property)?(this.config.group.by=columns[i],this.config.group.start=!0,this.config.group.columns[columns[i].id]=!0,columns[i].group=!0):this.config.group.columns[columns[i].id]=!1,this.config.order.active&&angular.isDefined(this.config.order.by)&&(columns[i].property===this.config.order.by||columns[i].property===this.config.order.by.property)?(this.config.order.by=columns[i],this.config.order.columns[columns[i].id]=!0,columns[i].order=!0):this.config.order.columns[columns[i].id]=!1,(null===columns[i].position||void 0===columns[i].position)&&(columns[i].position=initPosition++),void 0!==columns[i].convertValue&&null!==columns[i].convertValue&&columns[i].convertValue.active===!0&&(void 0===columns[i].convertValue.displayMeasureValue||void 0===columns[i].convertValue.saveMeasureValue))throw"Columns config error: "+columns[i].property+" convertValue=active but convertValue.displayMeasureValue or convertValue.saveMeasureValue is missing";(null===columns[i].showFilter||void 0===columns[i].showFilter)&&(columns[i].showFilter=!1),(null===columns[i].edit||void 0===columns[i].edit)&&(columns[i].edit=!1),(null===columns[i].headerTpl||void 0===columns[i].headerTpl)&&(columns[i].headerTpl='<span class="header" ng-model="udtTable" ng-bind="udtHelpers.messages.Messages(column.header)"/>')}var settings=$.extend(!0,[],this.configColumnDefault,columns);settings=$filter("orderBy")(settings,"position"),this.config.columns=angular.copy(settings),this.configMaster.columns=angular.copy(settings),this.setHideColumnByDefault(),this.newExtraHeaderConfig(),this.allResult&&(this.computeGroup(),this.sortAllResult(),this.computePaginationList(),this.computeDisplayResult())}},setColumnsConfigWithUrl:function(){$http.get(this.config.columnsUrl,{datatable:this}).then(function(resp){return resp.config.datatable.setColumnsConfig(resp.data),resp})},getColumnsConfig:function(){return this.config.columns},getConfig:function(){return this.config},setConfig:function(config){var settings=$.extend(!0,{},this.configDefault,config);this.config=angular.copy(settings),this.config.pagination.numberRecordsPerPageList||(this.config.pagination.numberRecordsPerPageList=[{number:10,clazz:""},{number:25,clazz:""},{number:50,clazz:""},{number:100,clazz:""}]),this.configMaster=angular.copy(settings),this.config.columnsUrl?this.setColumnsConfigWithUrl():this.setColumnsConfig(this.config.columns),this.displayResult&&this.displayResult.length>0&&(this.computePaginationList(),this.computeDisplayResult())},getHideColumns:function(){for(var c=[],i=0;i<this.config.columns.length;i++)this.config.columns[i].hide&&c.push(this.config.columns[i]);return c},getGroupColumns:function(){for(var c=[],i=0;i<this.config.columns.length;i++)this.config.columns[i].group&&c.push(this.config.columns[i]);return c},getEditColumns:function(){for(var c=[],i=0;i<this.config.columns.length;i++)this.config.columns[i].edit&&c.push(this.config.columns[i]);return c},generateColumnId:function(){return this.inc++,"p"+this.inc},newColumn:function(header,property,edit,hide,order,type,choiceInList,possibleValues,extraHeaders){var column={};return column.id=this.generateColumnId(),column.header=header,column.property=property,column.edit=edit,column.hide=hide,column.order=order,column.type=type,column.choiceInList=choiceInList,void 0!=possibleValues&&(column.possibleValues=possibleValues),void 0!=extraHeaders&&(column.extraHeaders=extraHeaders),column},addColumn:function(position,column){position>=0&&(column.position=position),this.config.columns.push(column),this.setColumnsConfig(this.config.columns),this.newExtraHeaderConfig()},deleteColumn:function(position){this.config.columns.splice(position,1),this.newExtraHeaderConfig()},addToExtraHeaderConfig:function(pos,header){angular.isDefined(this.config.extraHeaders.list[pos])||(this.config.extraHeaders.list[pos]=[]),this.config.extraHeaders.list[pos].push(header)},getExtraHeaderConfig:function(){return this.config.extraHeaders.list},newExtraHeaderConfig:function(){if(this.config.extraHeaders.dynamic===!0){this.config.extraHeaders.list={};for(var lineUsed=!1,count=0,i=0;i<this.config.extraHeaders.number;i++){lineUsed=!1;for(var header=void 0,j=0;j<this.config.columns.length;j++)this.isHide(this.config.columns[j].id)||(void 0!==this.config.columns[j].extraHeaders&&void 0!==this.config.columns[j].extraHeaders[i]?(lineUsed=!0,count>0&&(this.addToExtraHeaderConfig(i,{label:"",colspan:count}),count=0),void 0===header&&(header={label:this.config.columns[j].extraHeaders[i],colspan:0}),this.config.columns[j].extraHeaders[i]===header.label?header.colspan+=1:(this.addToExtraHeaderConfig(i,header),header={label:this.config.columns[j].extraHeaders[i],colspan:1})):void 0!==header?(lineUsed=!0,this.addToExtraHeaderConfig(i,header),count++,header=void 0):count++);count>0&&(lineUsed===!0||void 0!==header)&&(this.addToExtraHeaderConfig(i,{label:"",colspan:count}),count=0),void 0!==header&&this.addToExtraHeaderConfig(i,header)}}},getFinalValue:function(column,result){var filter=this.getFilter(column),formatter=this.getFormatter(column),context={col:column};context=Object.assign(context,this.config.objectsMustBeAddInGetFinalValue);var colValue=void 0;if(result.line.group||void 0!==column.url&&null!==column.url){if(result.line.group){var v=$parse("group."+column.id)(result.data,context);angular.isDefined(v)&&angular.isString(v)&&"#"===v.charAt(0)?colValue=v:angular.isDefined(v)&&(colValue=angular.isArray(v)?v.map(function(v){return $parse("this"+formatter)(v)}):$parse("this"+formatter)(v))}else if(!result.line.group&&void 0!==column.url&&null!==column.url){var url=$parse(column.url)(result.data,context),v=$parse(column.property+filter)(this.urlCache[url]);colValue=angular.isArray(v)?v.map(function(v){return $parse("this"+formatter)(v)}):$parse("this"+formatter)(v)}}else{var getter=$parse(column.property+filter),v=getter(result.data,context);colValue=angular.isArray(v)?v.map(function(v){return $parse("this"+formatter)(v)}):$parse("this"+formatter)(v)}return colValue},cleanColValue:function(column,colValue){return null===colValue&&(colValue=void 0),"number"!==column.type||void 0===colValue||angular.isArray(colValue)?"number"===column.type&&angular.isArray(colValue)?colValue=colValue.map(function(colValue){return colValue.replace(/\u00a0/g,"")}):"boolean"===column.type&&(void 0===colValue||angular.isArray(colValue)&&0===colValue.length)?colValue=this.messages.Messages("datatable.export.no"):"boolean"===column.type&&void 0!==colValue?(angular.isArray(colValue)||(colValue=[colValue]),colValue=colValue.map(function(colValue){return colValue===!0?this.messages.Messages("datatable.export.yes"):this.messages.Messages("datatable.export.no")},this),colValue='"'+colValue.join()+'"'):"string"!==column.type&&"text"!==column.type&&"textarea"!==column.type||void 0===colValue?("img"===column.type||"image"===column.type||"file"===column.type)&&(colValue=void 0):(angular.isArray(colValue)||(colValue=[colValue]),colValue='"'+colValue.join()+'"'):colValue=colValue.replace(/\u00a0/g,""),colValue},exportCSV:function(exportType){if(this.config.exportCSV.active){this.config.exportCSV.start=!0;var delimiter=this.config.exportCSV.delimiter,lineValue="",that=this,displayResultTmp=[];if(this.isGroupActive()){var orderProperty=this.config.group.by.property;orderProperty+=this.config.group.by.filter?"|"+this.config.group.by.filter:"";var orderSense=this.config.order.reverse?"-":"+";this.allResult=$filter("orderBy")(this.allResult,orderSense+orderProperty)}if(angular.forEach(this.allResult,function(value,key){var line={edit:void 0,selected:void 0,trClass:void 0,group:!1,"new":!1};this.push({data:value,line:line})},displayResultTmp),this.isGroupActive()&&(displayResultTmp=this.addGroup(displayResultTmp)),displayResultTmp){var columnsToPrint=this.config.columns;columnsToPrint.forEach(function(column){if(!that.config.hide.columns[column.id]){var header=column.header;header=angular.isFunction(header)?header():that.config.messages.transformKey(header),that.isGroupActive()&&column.property!=that.config.group.by.property&&("sum"===column.groupMethod?header+=this.messages.Messages("datatable.export.sum"):"average"===column.groupMethod?header+=this.messages.Messages("datatable.export.average"):"unique"===column.groupMethod?header+=this.messages.Messages("datatable.export.unique"):"countDistinct"===column.groupMethod||"count:true"===column.groupMethod?header+=this.messages.Messages("datatable.export.countDistinct"):"count"===column.groupMethod||"count:false"==column.groupMethod?header+=this.messages.Messages("datatable.export.count"):"collect"===column.groupMethod||"collect:false"===column.groupMethod?header+=this.messages.Messages("datatable.export.collect"):"collect:true"===column.groupMethod&&(header+=this.messages.Messages("datatable.export.collectDistinct"))),lineValue=lineValue+header+delimiter}},this),lineValue=lineValue.substr(0,lineValue.length-1)+"\n",displayResultTmp.forEach(function(result){columnsToPrint.forEach(function(column){if(!that.config.hide.columns[column.id]&&("groupsOnly"!==exportType||"groupsOnly"===exportType&&result.line.group)){var colValue=that.getFinalValue(column,result);colValue=that.cleanColValue(column,colValue),lineValue=lineValue+(colValue?colValue:"")+delimiter}},this),("all"===exportType||"groupsOnly"===exportType&&result.line.group)&&(lineValue=lineValue.substr(0,lineValue.length-1)+"\n")},this),displayResultTmp=void 0;var fixedstring="\ufeff"+lineValue,blob=new Blob([fixedstring],{type:"text/plain;charset=utf-8"}),currdatetime=$filter("date")(new Date,"yyyyMMdd_HHmmss"),text_filename=(this.config.name||this.configDefault.name)+"_"+currdatetime;saveAs(blob,text_filename+".csv")}else alert("No data to print. Select the data you need");this.config.exportCSV.start=!1}},getFormatter:function(col){var format="";return col&&col.type&&("date"===col.type?format+=" | date:'"+(col.format?col.format:this.messages.Messages("date.format"))+"'":"datetime"===col.type?format+=" | date:'"+(col.format?col.format:this.messages.Messages("datetime.format"))+"'":"number"===col.type&&(format+=" | number"+(col.format?":"+col.format:""))),format},getFilter:function(col){var filter="";return void 0!==col.convertValue&&null!==col.convertValue&&col.convertValue.active===!0&&col.convertValue.saveMeasureValue!=col.convertValue.displayMeasureValue&&(filter+="|udtConvert:"+JSON.stringify(col.convertValue)),col.filter?filter+"|"+col.filter:filter},canExportCSV:function(){return!this.config.exportCSV.active||this.config.exportCSV.start||this.isEmpty()?!1:this.config.edit.active&&this.config.edit.start?!1:!0},onDrop:function(e,draggedCol,droppedCol,datatable,alReadyInTheModel){for(var posDrop=droppedCol.position,posDrag=draggedCol.position,i=0;i<datatable.config.columns.length;i++)posDrop>posDrag&&datatable.config.columns[i].position>posDrag&&datatable.config.columns[i].position<posDrop&&datatable.config.columns[i].id!==draggedCol.id&&datatable.config.columns[i].position--,posDrag>posDrop&&datatable.config.columns[i].position>posDrop&&datatable.config.columns[i].position<posDrag&&datatable.config.columns[i].id!==draggedCol.id&&datatable.config.columns[i].position++,datatable.config.columns[i].id===draggedCol.id&&(datatable.config.columns[i].position=posDrop-1);datatable.setColumnsConfig(datatable.config.columns)}};return 2===arguments.length&&(iConfig=arguments[1],console.log("used bad constructor for datatable, only one argument is required the config")),datatable.setConfig(iConfig),datatable};return constructor}]),angular.module("ultimateDataTableServices").directive("udtAutoSelect",["$parse",function($parse){var OPTIONS_REGEXP=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*)$/;return{require:"ngModel",link:function(scope,element,attrs,ngModel){var valOption=void 0,multiple=!1;if(attrs.ngOptions?valOption=attrs.ngOptions:attrs.btOptions&&(valOption=attrs.btOptions),(attrs.multiple===!0||"true"===attrs.multiple)&&(multiple=!0),void 0!=valOption){var match=valOption.match(OPTIONS_REGEXP),getModelValue=$parse(match[1].replace(match[4]+".",""));scope.$watch(match[7],function(value){if(value&&1===value.length&&(void 0===ngModel.$modelValue||""===ngModel.$modelValue||null===ngModel.$modelValue)){var value=multiple?[getModelValue(value[0])]:getModelValue(value[0]);ngModel.$setViewValue(value),ngModel.$render()}})}else console.log("ng-options or bt-options required")}}}]),angular.module("ultimateDataTableServices").directive("udtBase64Img",[function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModel){var files,nbFiles=0,counter=0,onload=function(e){if(void 0!=e.target.result&&""!=e.target.result){var udtBase64Img={};udtBase64Img._type="img",udtBase64Img.fullname=e.target.file.name;var matchExtension=e.target.file.type.match(/^image\/(.*)/);if(matchExtension&&matchExtension.length>1){udtBase64Img.extension=matchExtension[1];var matchBase64=e.target.result.match(/^.*,(.*)/);udtBase64Img.value=matchBase64[1];var img=new Image;img.src=e.target.result,img.onload=function(){counter++,udtBase64Img.width=img.width,udtBase64Img.height=img.height,files.push(udtBase64Img),onloadend()}}else counter++,alert("This is not an image..."+udtBase64Img.fullname),elem[0].value=null}},onloadend=function(){nbFiles===counter&&(attrs.multiple?scope.$apply(function(scope){ngModel.$setViewValue(files)}):scope.$apply(function(scope){ngModel.$setViewValue(files[0])}))};elem.on("change",function(){if(nbFiles=0,counter=0,files=[],attrs.multiple)nbFiles=elem[0].files.length,angular.forEach(elem[0].files,function(inputFile){var reader=new FileReader;reader.file=inputFile,reader.onload=onload,reader.readAsDataURL(inputFile)});else{var reader=new FileReader;nbFiles=elem[0].files.length,reader.file=elem[0].files[0],reader.onload=onload,reader.readAsDataURL(elem[0].files[0])}}),elem.on("click",function(){elem[0].value=null})}}}]).directive("udtBase64File",[function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModel){var files,nbFiles=0,counter=0,onload=onload=function(e){if(void 0!=e.target.result&&""!=e.target.result){var udtBase64File={};udtBase64File.fullname=e.target.file.name;var matchExtension=e.target.file.type.match(/^application\/(.*)/),matchExtensionText=e.target.file.type.match(/^text\/(.*)/);if(matchExtension&&matchExtension.length>1?udtBase64File.extension=matchExtension[1]:matchExtensionText&&matchExtensionText.length>1&&(udtBase64File.extension=matchExtensionText[1]),void 0!=udtBase64File.extension){udtBase64File._type="file";var matchBase64=e.target.result.match(/^.*,(.*)/);udtBase64File.value=matchBase64[1],files.push(udtBase64File)}else alert("This is not an authorized file : "+udtBase64File.fullname);counter++}},onloadend=function(e){nbFiles===counter&&(attrs.multiple?scope.$apply(function(scope){ngModel.$setViewValue(files)}):scope.$apply(function(scope){ngModel.$setViewValue(files[0])}))};elem.on("change",function(){if(nbFiles=0,counter=0,files=[],attrs.multiple)nbFiles=elem[0].files.length,angular.forEach(elem[0].files,function(inputFile){var reader=new FileReader;reader.file=inputFile,reader.onload=onload,reader.onloadend=onloadend,reader.readAsDataURL(inputFile)});else{var reader=new FileReader;nbFiles=elem[0].files.length,reader.file=elem[0].files[0],reader.onload=onload,reader.onloadend=onloadend,reader.readAsDataURL(elem[0].files[0])}}),elem.on("click",function(){elem[0].value=null})}}}]),angular.module("ultimateDataTableServices").directive("udtBtselect",["$parse","$document","$window","$filter",function($parse,$document,$window,$filter){var BT_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*))\s+in\s+([\s\S]+?)$/;return{restrict:"A",replace:!1,scope:!0,template:'<div ng-switch on="isEdit()"><div ng-switch-when="false"><ul class="list-unstyled"><li ng-repeat-start="item in getItems()" ng-if="groupBy(item, $index)" ng-bind="itemGroupByLabel(item)" style="font-weight:bold"></li><li ng-repeat-end  ng-if="item.selected" ng-bind="itemLabel(item)" style="padding-left: 15px;"></li></ul></div><div class="dropdown" ng-switch-when="true"><div class="input-group"><input type="text" style="background:white" ng-class="inputClass" ng-model="selectedLabels" placeholder="{{placeholder}}" title="{{placeholder}}" readonly/><div class="input-group-btn"><button tabindex="-1" data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle" type="button" ng-disabled="isDisabled()" ng-click="open()"><span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right"  role="menu"><li ng-if="filter"><input ng-class="inputClass" type="text" ng-click="inputClick($event)" ng-model="filterValue" ng-change="setFilterValue(filterValue)"/></li><li ng-repeat-start="item in getItems()" ng-if="groupBy(item, $index)" class="divider"></li><li class="dropdown-header" ng-if="groupBy(item, $index)" ng-bind="itemGroupByLabel(item)"></li><li ng-repeat-end ng-click="selectItem(item, $event)"><a href="#"><i class="fa fa-check pull-right" ng-show="item.selected"></i><span class="text" ng-bind="itemLabel(item)" style="margin-right:30px;"></span></a></li></ul></div></div></div></div>',require:["?ngModel"],link:function(scope,element,attr,ctrls){function parseBtsOptions(input){var match=input.match(BT_OPTIONS_REGEXP);if(!match)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+input+"'.");return{itemName:match[4],sourceKey:match[5],source:$parse(match[5]),viewMapper:match[2]||match[1],modelMapper:match[1],groupBy:match[3],groupByGetter:match[3]?$parse(match[3].replace(match[4]+".","")):void 0}}function render(){var selectedLabels=[],modelValues=ngModelCtrl.$modelValue||[];if(angular.isArray(modelValues)||(modelValues=[modelValues]),items.length>0)for(var i=0;i<items.length;i++){var item=items[i];item.selected=!1;for(var j=0;j<modelValues.length;j++){var modelValue=modelValues[j];scope.itemValue(item)===modelValue&&(item.selected=!0,selectedLabels.push(scope.itemLabel(item)))}}scope.selectedLabels=selectedLabels}if(ctrls[0]){scope.inputClass=element.attr("class"),scope.placeholder=attr.placeholder,element.attr("class","");var filterValue,ngModelCtrl=ctrls[0],multiple=attr.multiple||!1,btOptions=attr.btOptions,editMode=attr.ngEdit?$parse(attr.ngEdit):void 0,filter=attr.filter||!1,optionsConfig=parseBtsOptions(btOptions),items=[],groupByLabels={},ngFocus=attr.ngFocus;scope.filter=filter,scope.setFilterValue=function(value){filterValue=value},scope.open=function(){ngFocus&&$parse(ngFocus)(scope)},scope.isDisabled=function(){return attr.ngDisabled?scope.$parent.$eval(attr.ngDisabled):!1},scope.isEdit=function(){return editMode?editMode(scope):!0},scope.getItems=function(){if(scope.isEdit()&&scope.filter){var filter={},getter=$parse(optionsConfig.viewMapper.replace(optionsConfig.itemName+".",""));return getter.assign(filter,filterValue),$filter("limitTo")($filter("filter")(items,filter),20)}return items},scope.groupBy=function(item,index){if(0===index&&(groupByLabels={}),optionsConfig.groupByGetter&&scope.isEdit()){if(0===index||index>0&&optionsConfig.groupByGetter(items[index-1])!==optionsConfig.groupByGetter(item))return!0}else if(optionsConfig.groupByGetter&&!scope.isEdit()&&item.selected&&!groupByLabels[optionsConfig.groupByGetter(item)])return groupByLabels[optionsConfig.groupByGetter(item)]=!0,!0;return!1},scope.itemGroupByLabel=function(item){return optionsConfig.groupByGetter(item)},scope.itemLabel=function(item){return $parse(optionsConfig.viewMapper.replace(optionsConfig.itemName+".",""))(item)},scope.itemValue=function(item){return $parse(optionsConfig.modelMapper.replace(optionsConfig.itemName+".",""))(item)},scope.selectItem=function(item,$event){if(multiple){for(var selectedValues=ngModelCtrl.$viewValue||[],newSelectedValues=[],itemValue=scope.itemValue(item),find=!1,i=0;i<selectedValues.length;i++)selectedValues[i]!==itemValue?newSelectedValues.push(selectedValues[i]):find=!0;find||newSelectedValues.push(itemValue),selectedValues=newSelectedValues,ngModelCtrl.$setViewValue(selectedValues),ngModelCtrl.$render(),$event.preventDefault(),$event.stopPropagation()}else scope.itemValue(item)!==ngModelCtrl.$viewValue?ngModelCtrl.$setViewValue(scope.itemValue(item)):ngModelCtrl.$setViewValue(null),ngModelCtrl.$render()},scope.inputClick=function($event){$event.preventDefault(),$event.stopPropagation()},scope.$watch(optionsConfig.sourceKey,function(newValue,oldValue){newValue&&newValue.length>0&&(items=angular.copy(newValue),render())}),ngModelCtrl.$render=render}}}}]),angular.module("ultimateDataTableServices").directive("udtCell",function(){return{restrict:"A",replace:!0,templateUrl:"udt-cell.html",link:function(scope,element,attr){}}}).directive("udtEditableCell",function(){return{restrict:"A",replace:!0,templateUrl:"udt-editableCell.html",link:function(scope,element,attr){}}}).directive("udtCellHeader",function(){return{restrict:"A",replace:!0,templateUrl:"udt-cellHeader.html",link:function(scope,element,attr){}}}).directive("udtCellFilter",function(){return{restrict:"A",replace:!0,templateUrl:"udt-cellFilter.html",link:function(scope,element,attr){}}}).directive("udtCellEdit",function(){return{restrict:"A",replace:!0,templateUrl:"udt-cellEdit.html",link:function(scope,element,attr){}}}).directive("udtCellRead",["$parse",function($parse){return{restrict:"A",replace:!0,templateUrl:"udt-cellRead.html",link:function(scope,element,attr){var getDisplayValue=function(column,value,currentScope){if(column.watch!==!0||value.line.group||void 0!==column.url&&null!==column.url){if(void 0!=column.url||null!=column.url){var url=$parse(column.url)(value.data);"udtTable.urlCache['"+url+"']."+column.property+filter+formatter;scope.$watch("udtTable.urlCache['"+url+"']",function(newValue,oldValue){newValue!==oldValue&&(scope.cellValue=currentScope.udtTable.getFinalValue(column,value))})}}else{var filter=currentScope.udtTable.getFilter(column),formatter=currentScope.udtTable.getFormatter(column);scope.$watch("value.data."+column.property+filter+formatter,function(newValue,oldValue){newValue!==oldValue&&(scope.cellValue=newValue)})}return currentScope.udtTable.getFinalValue(column,value)},getDisplayFunction=function(col){return angular.isFunction(col.property)?col.property(scope.value.data):getDisplayValue(col,scope.value,scope)};scope.cellValue=getDisplayFunction(scope.col)}}}]),angular.module("ultimateDataTableServices").directive("udtChange",function(){return{require:"ngModel",link:function(scope,element,attr,ngModelController){scope.$watch(attr.ngModel,function(newValue,oldValue){newValue!==oldValue&&scope.$evalAsync(attr.udtChange)})}}}),angular.module("ultimateDataTableServices").directive("udtCompile",["$compile",function($compile){return{restrict:"A",link:function(scope,element,attrs){var value=scope.$eval(attrs.udtCompile);element.html(value),$compile(element.contents())(scope)}}}]),angular.module("ultimateDataTableServices").directive("udtConvertvalue",["udtConvertValueServices","$filter","$parse",function(udtConvertValueServices,$filter,$parse){return{priority:1100,require:"ngModel",link:function(scope,element,attrs,ngModelController){var convertValues=udtConvertValueServices(),property=void 0;
attrs.udtConvertvalue&&(property=$parse(attrs.udtConvertvalue)(scope)),ngModelController.$formatters.push(function(value){var convertedValue=convertValues.convertValue(value,property.saveMeasureValue,property.displayMeasureValue);return convertedValue}),ngModelController.$parsers.push(function(value){return value=convertValues.parse(value),void 0!=property&&(value=convertValues.convertValue(value,property.displayMeasureValue,property.saveMeasureValue)),value})}}}]),angular.module("ultimateDataTableServices").directive("udtDateTimestamp",["$filter",function($filter){return{require:"ngModel",link:function(scope,element,attrs,ngModelController){ngModelController.$formatters.push(function(data){var convertedData=data;return convertedData=$filter("date")(convertedData,Messages("date.format"))}),ngModelController.$parsers.push(function(data){var convertedData=data;return moment&&""!==convertedData?convertedData=moment(data,Messages("date.format").toUpperCase()).valueOf():(convertedData=null,console.log("mission moment library to convert string to date")),convertedData})}}}]),angular.module("ultimateDataTableServices").directive("udtDefaultValue",["$parse",function($parse){return{priority:1200,require:"ngModel",link:function(scope,element,attrs,ngModelController){var _col=$parse(attrs.udtDefaultValue)(scope),currentValue=$parse(attrs.ngModel)(scope),isEmpty=function(value){return angular.isUndefined(value)||""===value||null===value},setDefaultValue=function(){if(null!=_col&&isEmpty(currentValue))if("boolean"===_col.type)"true"===_col.defaultValues||_col.defaultValues===!0?(ngModelController.$setViewValue(!0),ngModelController.$render()):("false"===_col.defaultValues||_col.defaultValues===!1)&&(ngModelController.$setViewValue(!0),ngModelController.$setViewValue(!1),ngModelController.$render());else if(angular.isFunction(_col.defaultValues)){var defaultValue=_col.defaultValues(scope.value.data,_col);ngModelController.$setViewValue(defaultValue),ngModelController.$render()}else ngModelController.$setViewValue(_col.defaultValues),ngModelController.$render()};_col&&(setDefaultValue(),angular.isFunction(_col.defaultValues)&&scope.$watch(attrs.udtDefaultValue+".defaultValues(value.data,col)",function(newValue,oldValue){newValue!==oldValue&&setDefaultValue()}))}}}]),angular.module("ultimateDataTableServices").directive("udtForm",function(){return{restrict:"A",replace:!0,transclude:!0,templateUrl:"udt-form.html",link:function(scope,element,attr){}}}),angular.module("ultimateDataTableServices").directive("udtHighlight",function(){var component=function(scope,element,attrs){attrs.highlightClass||(attrs.highlightClass="udt-highlight"),attrs.active||(scope.active=!0);var replacer=function(match,item){return'<span class="'+attrs.highlightClass+'">'+match+"</span>"},tokenize=function(keywords){keywords=keywords.replace(new RegExp(",$","g"),"").split(",");var i,l=keywords.length;for(i=0;l>i;i++)keywords[i]=keywords[i].replace(new RegExp("^ | $","g"),"");return keywords};scope.$watch("keywords",function(newValue,oldValue){if(!newValue||""===newValue||!scope.active)return void 0!==scope.udtHighlight&&null!==scope.udtHighlight&&element.html(scope.udtHighlight.replace(/\n/g,"<br />").toString()),!1;var tokenized=tokenize(newValue),regex=new RegExp(tokenized.join("|"),"gmi"),html=scope.udtHighlight.replace(/\n/g,"<br />").toString().replace(regex,replacer);element.html(html)},!0)};return{link:component,replace:!1,scope:{active:"=",udtHighlight:"=",keywords:"="}}}),angular.module("ultimateDataTableServices").directive("udtHtmlFilter",function($filter,udtI18n){return{priority:1e3,require:"ngModel",link:function(scope,element,attrs,ngModelController){var messagesService=udtI18n(navigator.languages||navigator.language||navigator.userLanguage);ngModelController.$formatters.push(function(data){var convertedData=data;return"datetime"===attrs.udtHtmlFilter?convertedData=$filter("date")(convertedData,messagesService.Messages("datetime.format")):"date"===attrs.udtHtmlFilter?convertedData=$filter("date")(convertedData,messagesService.Messages("date.format")):"number"===attrs.udtHtmlFilter&&(convertedData=$filter("number")(convertedData)),convertedData}),ngModelController.$parsers.push(function(data){var convertedData=data;return"number"===attrs.udtHtmlFilter&&null!==convertedData&&void 0!==convertedData&&angular.isString(convertedData)?(convertedData=convertedData.replace(",",".").replace(/[\u00a0|\s]/g,""),isNaN(convertedData)||""===convertedData?(isNaN(convertedData)||""===convertedData)&&(convertedData=null):convertedData=1*convertedData):"date"===attrs.udtHtmlFilter&&null!==convertedData&&void 0!==convertedData&&angular.isString(convertedData)&&(moment&&""!==convertedData?convertedData=moment(data,messagesService.Messages("date.format").toUpperCase()).valueOf():(convertedData=null,console.log("mission moment library to convert string to date"))),convertedData})}}}),angular.module("ultimateDataTableServices").directive("udtMessages",function(){return{restrict:"A",replace:!0,templateUrl:"udt-messages.html",link:function(scope,element,attr){}}}),angular.module("ultimateDataTableServices").directive("udtTable",function(){return{restrict:"A",replace:!0,templateUrl:"udt-table.html",link:function(scope,element,attr){scope.udtTable&&scope.datatableForm&&(scope.udtTable.formController=scope.datatableForm),scope.$watch("udtTable",function(newValue,oldValue){newValue&&newValue!==oldValue&&scope.datatableForm&&(scope.udtTable.formController=scope.datatableForm)});var udtTableHelpers={setImage:function(imageData,imageName,imageFullSizeWidth,imageFullSizeHeight){scope.udtModalImage={},scope.udtModalImage.modalImage=imageData,scope.udtModalImage.modalTitle=imageName;var margin=25,zoom=Math.min((document.body.clientWidth-margin)/imageFullSizeWidth,1);scope.udtModalImage.modalWidth=imageFullSizeWidth*zoom,scope.udtModalImage.modalHeight=imageFullSizeHeight*zoom,scope.udtModalImage.modalLeft=(document.body.clientWidth-scope.udtModalImage.modalWidth)/2,scope.udtModalImage.modalTop=(window.innerHeight-scope.udtModalImage.modalHeight)/2,scope.udtModalImage.modalTop=scope.udtModalImage.modalTop-50},getTrClass:function(data,line,currentScope){var udtTable=scope.udtTable;return line.trClass?line.trClass:angular.isFunction(udtTable.config.lines.trClass)?udtTable.config.lines.trClass(data,line):angular.isString(udtTable.config.lines.trClass)?currentScope.$eval(udtTable.config.lines.trClass)||udtTable.config.lines.trClass:line.group&&!udtTable.config.group.showOnlyGroups?"active":""},getTdClass:function(data,col,currentScope){return angular.isFunction(col.tdClass)?col.tdClass(data):angular.isString(col.tdClass)?currentScope.$eval(col.tdClass)||col.tdClass:""},getThClass:function(col,currentScope){var clazz="";return col&&angular.isFunction(col.thClass)?clazz=col.thClass(col):col&&angular.isString(col.thClass)&&(clazz=currentScope.$eval(col.thClass)||col.thClass),col&&void 0!=col.required&&null!=col.required&&(angular.isFunction(col.required)&&col.required()||col.required===!0||angular.isString(col.required)&&scope.$eval(col.required))&&(clazz+=" required"),clazz},select:function(data,line){var udtTable=scope.udtTable;line&&(udtTable.config.select.active&&(line.group?line.group&&udtTable.config.group.enableLineSelection&&(line.groupSelected?(line.groupSelected=!1,line.trClass=void 0):(line.groupSelected=!0,line.trClass="info")):line.selected?(line.selected=!1,line.trClass=void 0):(line.selected=!0,line.trClass="info")),udtTable.config.select.active&&angular.isFunction(udtTable.config.select.callback)?(console.warning("select.callback is deprecated. Use mouseevents.clickCallback instead."),udtTable.config.select.callback(line,data)):udtTable.config.mouseevents.active&&angular.isFunction(udtTable.config.mouseevents.clickCallback)&&udtTable.config.mouseevents.clickCallback(line,data))},mouseover:function(data,line){var udtTable=scope.udtTable;if(udtTable.config.mouseevents.active){var cb=udtTable.config.mouseevents.overCallback;angular.isFunction(cb)&&cb(line,data)}},mouseleave:function(data,line){var udtTable=scope.udtTable;if(udtTable.config.mouseevents.active){var cb=udtTable.config.mouseevents.leaveCallback;angular.isFunction(cb)&&cb(line,data)}},getRowSpanValue:function(i,j){var udtTable=scope.udtTable;return udtTable.config.mergeCells.active&&void 0!==udtTable.config.mergeCells.rowspans?udtTable.config.mergeCells.rowspans[i][j]:1},isShowCell:function(col,i,j){var udtTable=scope.udtTable,value=!udtTable.isHide(col.id);return udtTable.config.mergeCells.active&&value&&void 0!==udtTable.config.mergeCells.rowspans&&(value=0!==udtTable.config.mergeCells.rowspans[i][j]),value}};scope.udtTableHelpers=udtTableHelpers}}}),angular.module("ultimateDataTableServices").directive("udtTbody",function(){return{restrict:"A",link:function(scope,element,attr){var getEditProperty=function(col,header,filter){if(header)return"udtTable.config.edit.columns."+col.id+".value";if(filter)return"udtTable.searchTerms."+col.property;if(angular.isString(col.property))return"value.data."+col.property;throw"Error property is not editable !"},getConvertDirective=function(col,header){return void 0!==col.convertValue&&null!==col.convertValue&&col.convertValue.active===!0&&col.convertValue.saveMeasureValue!==col.convertValue.displayMeasureValue?'udt-convertvalue="col.convertValue"':""},getOptions=function(col){return angular.isString(col.possibleValues)?col.possibleValues:"col.possibleValues"},getGroupBy=function(col){return angular.isString(col.groupBy)?"group by opt."+col.groupBy:""},udtTbodyHelpers={getEditElement:function(col,header,filter){var editElement="",ngChange='"',defaultValueDirective="";header?ngChange='" udt-change="udtTable.updateColumn(col.property, col.id)"':filter?ngChange='" udt-change="udtTable.searchLocal(udtTable.searchTerms)"':col.defaultValues?defaultValueDirective='udt-default-value="col"':col.choiceInList&&(defaultValueDirective=" udt-auto-select");var userDirectives="";void 0!==col.editDirectives&&(userDirectives=col.editDirectives,angular.isFunction(userDirectives)&&(userDirectives=userDirectives()));var requiredDirective="";if(void 0==col.required||null==col.required||header?requiredDirective="name='"+col.id+"' ":angular.isFunction(col.required)&&col.required()||col.required===!0?requiredDirective='name="'+col.id+'" ng-required=true':angular.isString(col.required)&&(requiredDirective='name="'+col.id+'" ng-required="'+col.required+'"'),col.editTemplate)editElement=col.editTemplate.replace(/#ng-model/g,'ng-model="'+getEditProperty(col,header,filter)+ngChange+" "+requiredDirective);else if("boolean"===col.type)editElement='<input class="form-control"'+defaultValueDirective+'type="checkbox" class="input-small" ng-model="'+getEditProperty(col,header,filter)+ngChange+"/>";else if("textarea"===col.type)editElement='<textarea class="form-control"'+defaultValueDirective+userDirectives+'ng-model="'+getEditProperty(col,header,filter)+ngChange+"></textarea>";else if("img"===col.type)editElement='<input type="file" class="form-control" udt-base64-img ng-model="'+getEditProperty(col,header,filter)+'" id="{{\''+col.id+"_'+value.line.id}}\" "+requiredDirective+' ng-if="'+getEditProperty(col,header,filter)+' === undefined" /><div  ng-click="udtTableHelpers.setImage('+getEditProperty(col,header,filter)+".value,"+getEditProperty(col,header,filter)+".fullname,"+getEditProperty(col,header,filter)+".width,"+getEditProperty(col,header,filter)+'.height)"   class="thumbnail" ng-if="'+getEditProperty(col,header,filter)+' !== undefined" >  <div data-target="#udtModalImage" role="button" data-toggle="modal" >     <a href="#">    <img  ng-src="data:image/{{'+getEditProperty(col,header,filter)+".extension}};base64,{{"+getEditProperty(col,header,filter)+'.value}}" width="{{'+getEditProperty(col,header,filter)+'.width*0.1}}" height="{{'+getEditProperty(col,header,filter)+'.height*0.1}}" />     </a> </div> </div> <button ng-if="'+getEditProperty(col,header,filter)+' !== undefined" class="btn btn-default btn-xs" ng-click="'+getEditProperty(col,header,filter)+' = undefined" > <i class="fa fa-trash-o"></i> </button>',header&&(editElement="");else if("file"===col.type)editElement='<input ng-if="'+getEditProperty(col,header,filter)+' === undefined"  type="file" class="form-control" udt-base64-file ng-model="'+getEditProperty(col,header,filter)+'" id="{{\''+col.id+"_'+value.line.id}} "+requiredDirective+' /><div ng-if="'+getEditProperty(col,header,filter)+' !== undefined" ><a target="_blank" ng-href="data:application/{{'+getEditProperty(col,header,filter)+".extension}};base64,{{"+getEditProperty(col,header,filter)+'.value}}">{{'+getEditProperty(col,header,filter)+'.fullname}}</a> </div> <button ng-if="'+getEditProperty(col,header,filter)+' !== undefined" class="btn btn-default btn-xs" ng-click="'+getEditProperty(col,header,filter)+' = undefined" ><i class="fa fa-trash-o"></i> </button>',header&&(editElement="");else if(col.choiceInList)if(col.choiceInList)switch(col.listStyle){case"radio":editElement='<label class="radio-inline" ng-repeat="opt in '+getOptions(col)+' track by $index" '+userDirectives+'><input udt-html-filter="{{col.type}}" type="radio" ng-model="'+getEditProperty(col,header,filter)+ngChange+' ng-value="{{opt.code}}"> {{opt.name}}</label>';break;case"multiselect":editElement='<select class="form-control" multiple="true" '+requiredDirective+" "+defaultValueDirective+' ng-options="opt.code '+scope.udtTable.getFormatter(col)+" as opt.name "+getGroupBy(col)+" for opt in "+getOptions(col)+'"  ng-model="'+getEditProperty(col,header,filter)+ngChange+userDirectives+"></select>";break;case"bt-select":editElement='<div udt-html-filter="{{col.type}}" class="form-control" udt-btselect '+requiredDirective+" "+defaultValueDirective+' placeholder="" bt-dropdown-class="dropdown-menu-right" bt-options="opt.code as opt.name  '+getGroupBy(col)+" for opt in "+getOptions(col)+'"  ng-model="'+getEditProperty(col,header,filter)+ngChange+userDirectives+"></div>";break;case"bt-select-filter":editElement='<div udt-html-filter="{{col.type}}" class="form-control" filter="true" udt-btselect '+requiredDirective+" "+defaultValueDirective+' placeholder="" bt-dropdown-class="dropdown-menu-right" bt-options="opt.code as opt.name  '+getGroupBy(col)+" for opt in "+getOptions(col)+'"  ng-model="'+getEditProperty(col,header,filter)+ngChange+userDirectives+"></div>";break;case"bt-select-multiple":editElement='<div class="form-control" '+requiredDirective+" "+defaultValueDirective+' udt-btselect multiple="true" bt-dropdown-class="dropdown-menu-right" placeholder="" bt-options="opt.code as opt.name  '+getGroupBy(col)+" for opt in "+getOptions(col)+'"  ng-model="'+getEditProperty(col,header,filter)+ngChange+userDirectives+"></div>";break;default:editElement='<select udt-html-filter="{{col.type}}" class="form-control" '+requiredDirective+" "+defaultValueDirective+' ng-options="opt.code '+scope.udtTable.getFormatter(col)+" as opt.name "+getGroupBy(col)+" for opt in "+getOptions(col)+'"  ng-model="'+getEditProperty(col,header,filter)+ngChange+userDirectives+"><option></option></select>"}else editElement="Edit Not Defined for col.type !";else editElement='<input class="form-control" '+requiredDirective+" "+defaultValueDirective+" "+getConvertDirective(col,header)+' udt-html-filter="{{col.type}}" type="text" class="input-small" ng-model="'+getEditProperty(col,header,filter)+ngChange+userDirectives+"/>";return'<div class="form-group"  ng-class="udtTbodyHelpers.getValidationClass(\'subForm\'+value.line.id, col)">'+editElement+'<span class="help-block" ng-if="value.line.errors[\''+col.property+'\'] !== undefined">{{value.line.errors["'+col.property+'"]}}<br></span></div>'},getValidationClass:function(formName,col){return scope.udtTable.config.save.enableValidation&&scope.datatableForm[formName]&&scope.datatableForm[formName][col.id]&&scope.datatableForm[formName][col.id].$invalid?"has-error":void 0},getDisplayElement:function(col){return angular.isDefined(col.render)&&null!==col.render?angular.isFunction(col.render)?'<span udt-compile="udtTable.config.columns[$index].render(value.data, value.line)"></span>':angular.isString(col.render)?'<span udt-compile="udtTable.config.columns[$index].render"></span>':void 0:"boolean"!==col.type&&"img"!==col.type&&"file"!==col.type?'<span ng-bind="cellValue"></span>':"boolean"===col.type?'<div ng-switch on="cellValue"><i ng-switch-when="true" class="fa fa-check-square-o"></i><i ng-switch-default class="fa fa-square-o"></i></div>':"img"===col.type?'<div  ng-click="udtTableHelpers.setImage(cellValue.value,cellValue.fullname,cellValue.width,cellValue.height)" class="thumbnail" ng-if="cellValue !== undefined" ><div data-target="#udtModalImage" role="button" data-toggle="modal" ><a href="#"><img ng-src="data:image/{{cellValue.extension}};base64,{{cellValue.value}}" width="{{cellValue.width*0.1}}" height="{{cellValue.height*0.1}}"/></a></div></div>':"file"===col.type?'<a ng-href="data:application/{{cellValue.extension}};base64,{{cellValue.value}}" download="{{cellValue.fullname}}">{{cellValue.fullname}}</a>':""}};scope.udtTbodyHelpers=udtTbodyHelpers}}}),angular.module("ultimateDataTableServices").directive("udtTextareaResize",function(){return{restrict:"A",require:"ngModel",replace:!1,template:"",link:function(scope,element,attr,ngModel){var rows=3,cols=35;scope.$watch(ngModel.$modelValue,function(){var value=ngModel.$modelValue;if(value){var lines=value.split("\n");rows=Math.max(lines.length,rows),lines.forEach(function(line){cols=Math.max(cols,line.length)}),attr.$set("cols",cols),attr.$set("rows",rows)}})}}}),angular.module("ultimateDataTableServices").directive("udtToolbar",function(){return{restrict:"A",replace:!0,templateUrl:"udt-toolbar.html",link:function(scope,element,attr){}}}).directive("udtToolbarBottom",function(){return{restrict:"A",replace:!0,templateUrl:"udt-toolbar-bottom.html",link:function(scope,element,attr){}}}),angular.module("ultimateDataTableServices").directive("ultimateDatatable",["$parse","$q","$timeout","$templateCache",function($parse,$q,$timeout,$templateCache){return{restrict:"A",replace:!0,scope:!0,transclude:!0,templateUrl:"ultimate-datatable.html",link:function(scope,element,attr){if(attr.ultimateDatatable){scope.udtTable=$parse(attr.ultimateDatatable)(scope),scope.$watch(attr.ultimateDatatable,function(newValue,oldValue){!newValue||newValue===oldValue&&scope.udtTable||(scope.udtTable=newValue)});var udtHelpers={messages:{Messages:function(message,arg){return angular.isFunction(message)&&(message=message()),null==arg||void 0==arg?scope.udtTable.config.messages.transformKey(message):scope.udtTable.config.messages.transformKey(message,arg)}},getTotalNumberRecords:function(){return scope.udtTable.config.group.active&&scope.udtTable.config.group.start&&!scope.udtTable.config.group.showOnlyGroups?scope.udtTable.totalNumberRecords+" - "+scope.udtTable.allGroupResult.length:scope.udtTable.config.group.active&&scope.udtTable.config.group.start&&scope.udtTable.config.group.showOnlyGroups?scope.udtTable.allGroupResult?scope.udtTable.allGroupResult.length:0:scope.udtTable.totalNumberRecords}};scope.udtHelpers=udtHelpers,scope.udtTableFunctions||(scope.udtTableFunctions={}),scope.udtTableFunctions.setNumberRecordsPerPage=function(elt){scope.udtTable.setSpinner(!0),$timeout(function(){scope.udtTable.setNumberRecordsPerPage(elt)})["finally"](function(){scope.udtTable.isRemoteMode(scope.udtTable.config.pagination.mode)||scope.udtTable.computeDisplayResultTimeOut["finally"](function(){scope.udtTable.setSpinner(!1)})})},scope.udtTableFunctions.setPageNumber=function(page){scope.udtTable.setSpinner(!0),$timeout(function(){scope.udtTable.setPageNumber(page)})["finally"](function(){scope.udtTable.isRemoteMode(scope.udtTable.config.pagination.mode)||scope.udtTable.computeDisplayResultTimeOut["finally"](function(){scope.udtTable.setSpinner(!1)})})},scope.udtTableFunctions.setOrderColumn=function(column){scope.udtTable.setSpinner(!0),$timeout(function(){scope.udtTable.setOrderColumn(column)})["finally"](function(){scope.udtTable.isRemoteMode(scope.udtTable.config.order.mode)||scope.udtTable.computeDisplayResultTimeOut["finally"](function(){scope.udtTable.setSpinner(!1)})})},scope.udtTableFunctions.setGroupColumn=function(column){scope.udtTable.setSpinner(!0),$timeout(function(){scope.udtTable.setGroupColumn(column)})["finally"](function(){scope.udtTable.computeDisplayResultTimeOut["finally"](function(){scope.udtTable.setSpinner(!1)})})},scope.udtTableFunctions.updateShowOnlyGroups=function(){scope.udtTable.setSpinner(!0),$timeout(function(){scope.udtTable.updateShowOnlyGroups()})["finally"](function(){scope.udtTable.computeDisplayResultTimeOut["finally"](function(){scope.udtTable.setSpinner(!1)})})},scope.udtTableFunctions.cancel=function(){scope.udtTable.setSpinner(!0),$timeout(function(){scope.udtTable.cancel()})["finally"](function(){scope.udtTable.computeDisplayResultTimeOut["finally"](function(){scope.udtTable.setSpinner(!1)})})},scope.udtTableFunctions.setEdit=function(column){scope.udtTable.setSpinner(!0),$timeout(function(){scope.udtTable.setEdit(column)})["finally"](function(){scope.udtTable.setSpinner(!1)})},scope.udtTableFunctions.setHideColumn=function(column){scope.udtTable.setSpinner(!0),$timeout(function(){scope.udtTable.setHideColumn(column)})["finally"](function(){scope.udtTable.setSpinner(!1)})},scope.udtTableFunctions.exportCSV=function(exportType){scope.udtTable.setSpinner(!0),$timeout(function(){scope.udtTable.exportCSV(exportType)})["finally"](function(){scope.udtTable.setSpinner(!1)})}}}}}]),angular.module("ultimateDataTableServices").filter("udtCollect",["$parse","$filter",function($parse,$filter){return function(array,key,unique,keyUnique,context){if(!array||0===array.length)return void 0;if(!angular.isArray(array)&&(angular.isObject(array)||angular.isNumber(array)||angular.isString(array)||angular.isDate(array)))array=[array];else if(!angular.isArray(array))throw"input is not an array, object, number or string !";if(key&&!angular.isString(key))throw"key is not valid, only string is authorized";var possibleValues=[];return angular.forEach(array,function(element){if(angular.isObject(element)){var currentValue=$parse(key)(element,context);void 0!==currentValue&&null!==currentValue&&(angular.isArray(currentValue)?possibleValues=possibleValues.concat(currentValue):possibleValues.push(currentValue))}else if(!key&&angular.isObject(value))throw"missing key !"}),unique&&(possibleValues=$filter("udtUnique")(possibleValues,keyUnique,context)),possibleValues}}]),angular.module("ultimateDataTableServices").filter("udtConvert",["udtConvertValueServices",function(udtConvertValueServices){return function(input,property){var convertValues=udtConvertValueServices();return void 0!=property&&(input=convertValues.convertValue(input,property.saveMeasureValue,property.displayMeasureValue)),input}}]),angular.module("ultimateDataTableServices").filter("udtCount",["$parse",function($parse){return function(array,key,distinct,context){if(!array||0===array.length)return void 0;if(!angular.isArray(array)&&(angular.isObject(array)||angular.isNumber(array)||angular.isString(array)||angular.isDate(array)))array=[array];else if(!angular.isArray(array))throw"input is not an array, object, number or string !";if(key&&!angular.isString(key))throw"key is not valid, only string is authorized";var possibleValues=[];return angular.forEach(array,function(element){if(angular.isObject(element)){var currentValue=$parse(key)(element,context);angular.isArray(currentValue)&&1===currentValue.length&&(currentValue=currentValue[0]),distinct&&void 0!==currentValue&&null!==currentValue&&-1===possibleValues.indexOf(currentValue)?possibleValues.push(currentValue):distinct||void 0===currentValue||null===currentValue||possibleValues.push(currentValue)}else if(!key&&angular.isObject(value))throw"missing key !"}),possibleValues.length}}]),angular.module("ultimateDataTableServices").filter("udtUnique",["$parse",function($parse){return function(collection,property,context){function toArray(object){for(var i=-1,props=Object.keys(object),result=new Array(props.length);++i<props.length;)result[i]=object[props[i]];return result}function some(array,member){return array.some(function(el){return equals(el,member)})}var isUndefined=(angular.isDefined,angular.isUndefined),isObject=(angular.isFunction,angular.isString,angular.isNumber,angular.isObject),isArray=angular.isArray,equals=(angular.forEach,angular.extend,angular.copy,angular.equals);if(!isArray(collection)&&!isObject(collection))return collection;if(collection=angular.isObject(collection)?toArray(collection):collection,isUndefined(property))return collection.filter(function(elm,pos,self){return self.indexOf(elm)===pos});var uniqueItems=[],get=$parse(property);return collection.filter(function(elm){var prop=get(elm,context);return some(uniqueItems,prop)?!1:(uniqueItems.push(prop),!0)})}}]),angular.module("ultimateDataTableServices").factory("udtConvertValueServices",[function(){var constructor=function($scope){var udtConvertValueServices={convertValue:function(value,inputUnit,outputUnit,precision){if(inputUnit!==outputUnit&&!isNaN(value)&&null!==value){var convert=this.getConversion(inputUnit,outputUnit);if(void 0==convert||angular.isFunction(convert)){if(void 0===convert||null===convert)throw"Error: Unknown Conversion "+inputUnit+" to "+outputUnit}else value*=convert,void 0!==precision&&(value=value.toPrecision(precision))}return value},getConversion:function(inputUnit,outputUnit){return"µg"===inputUnit&&"ng"===outputUnit||"ml"===inputUnit&&"µl"===outputUnit||"pM"===inputUnit&&"nM"===outputUnit?.001:"ng"===inputUnit&&"µg"===outputUnit||"µl"===inputUnit&&"ml"===outputUnit||"nM"===inputUnit&&"pM"===outputUnit?1e3:"mM"===inputUnit&&"nM"===outputUnit?1e6:"nM"===inputUnit&&"mM"===outputUnit?1e-6:void 0},parse:function(value){var valueToConvert=value;if(null!==valueToConvert&&void 0!==valueToConvert&&!angular.isNumber(valueToConvert)){var valueConverted=value.replace(/\s+/g,"").replace(",",".");return valueConverted=parseFloat(valueConverted)}return value}};return udtConvertValueServices};return constructor}]),angular.module("ultimateDataTableServices").factory("udtI18n",[function(){var constructor=function(preferedLanguageVar){var udtI18n={init:function(){if(this.preferedLanguage="en",!preferedLanguageVar)return!1;var preferedLanguage=[];Array.isArray(preferedLanguageVar)?preferedLanguage=preferedLanguageVar.slice():preferedLanguage.push(preferedLanguageVar),preferedLanguage.some(function(language){if(this.translationExist(language))return this.preferedLanguage=language,!0;var splitedLanguages=language.split("-");if(splitedLanguages.length>1){var primaryLanguageSubtag=splitedLanguages[0];if(this.translationExist(primaryLanguageSubtag))return this.preferedLanguage=primaryLanguageSubtag,!0}},this)},translationExist:function(language){return void 0!==this.translateTable[language]},translateTable:{fr:{result:"Résultats","date.format":"dd/MM/yyyy","datetime.format":"dd/MM/yyyy HH:mm:ss","datatable.button.selectall":"Tout sélectionner (page courante)","datatable.button.unselectall":"Tout délectionner  (page courante)","datatable.button.cancel":"Annuler","datatable.button.hide":"Cacher","datatable.button.show":"Afficher Détails","datatable.button.edit":"Editer","datatable.button.sort":"Trier","datatable.button.save":"Sauvegarder","datatable.button.add":"Ajouter","datatable.button.remove":"Supprimer","datatable.button.searchLocal":"Rechercher","datatable.button.resetSearchLocal":"Annuler","datatable.button.length":"Taille ({0})","datatable.totalNumberRecords":"{0} Résultat(s)","datatable.button.exportCSV":"Export CSV","datatable.msg.success.save":"Toutes les sauvegardes ont réussi.","datatable.msg.error.save":"Il y a {0} sauvegarde(s) en erreur.","datatable.msg.success.remove":"Toutes les suppressions ont réussi.","datatable.msg.error.remove":" Il y a {0} suppression(s) en erreur.","datatable.remove.confirm":"Pouvez-vous confirmer la suppression ?","datatable.export.sum":"(Somme)","datatable.export.average":"(Moyenne)","datatable.export.unique":"(Valeur uniq.)","datatable.export.count":"(Nb. valeurs)","datatable.export.countDistinct":"(Nb. valeurs différentes)","datatable.export.collect":"(Liste valeurs)","datatable.export.collectDistinct":"(Liste valeurs différentes)","datatable.export.yes":"Oui","datatable.export.no":"Non","datatable.button.group":"Grouper / Dégrouper","datatable.button.generalGroup":"Grouper toute la sélection","datatable.button.basicExportCSV":"Exporter toutes les lignes","datatable.button.groupedExportCSV":"Exporter les lignes groupées","datatable.button.showOnlyGroups":"Voir uniquement les groupes","datatable.button.top":"Aller au début du tableau"},en:{result:"Results","date.format":"MM/dd/yyyy","datetime.format":"MM/dd/yyyy HH:mm:ss","datatable.button.selectall":"Select all (current page)","datatable.button.unselectall":"Deselect all (current page)","datatable.button.cancel":"Cancel","datatable.button.hide":"Hide","datatable.button.show":"Show Details","datatable.button.edit":"Edit","datatable.button.sort":"Order","datatable.button.save":"Save","datatable.button.add":"Add","datatable.button.remove":"Remove","datatable.button.searchLocal":"Search","datatable.button.resetSearchLocal":"Cancel","datatable.button.length":"Size ({0})","datatable.totalNumberRecords":"{0} Result(s)","datatable.button.exportCSV":"CSV Export","datatable.msg.success.save":"All backups are successful.","datatable.msg.error.save":"There are {0} backup(s) in error.","datatable.msg.success.remove":"All the deletions are successful.","datatable.msg.error.remove":" There are {0} deletion(s) in error.","datatable.remove.confirm":"Can you confirm the delete ?","datatable.export.sum":"(Sum)","datatable.export.average":"(Average)","datatable.export.unique":"(Single value)","datatable.export.count":"(Nb. of values)","datatable.export.countDistinct":"(Num. of distinct occurrence)","datatable.export.collect":"(List of values)","datatable.export.collectDistinct":"(List of different values)","datatable.export.yes":"Yes","datatable.export.no":"No","datatable.button.group":"Group / Ungroup","datatable.button.generalGroup":"Group All selected lines","datatable.button.basicExportCSV":"Export all lines","datatable.button.groupedExportCSV":"Export only grouped lines","datatable.button.showOnlyGroups":"See only group","datatable.button.top":"Go to the top"},nl:{result:"Resultaten","date.format":"dd/MM/yyyy","datetime.format":"dd/MM/yyyy HH:mm:ss","datatable.button.selectall":"Selecteer alles","datatable.button.unselectall":"Deselecteer alles","datatable.button.cancel":"Annuleren","datatable.button.hide":"Verberg","datatable.button.show":"Toon details","datatable.button.edit":"Bewerk","datatable.button.sort":"Sorteer","datatable.button.save":"Opslaan","datatable.button.add":"Toevoegen","datatable.button.remove":"Verwijderen","datatable.button.searchLocal":"Zoek","datatable.button.resetSearchLocal":"Annuleer","datatable.button.length":"Grote ({0})","datatable.totalNumberRecords":"{0} Resultaten","datatable.button.exportCSV":"CSV Export","datatable.msg.success.save":"Opslag is succesvol","datatable.msg.error.save":"Er zijn {0} backup(s) met een fout.","datatable.msg.success.remove":"Alles is succesvol verwijderd.","datatable.msg.error.remove":" Er zijn {0} verwijderingen met een fout.","datatable.remove.confirm":"Bevestigd u de verwijdering?","datatable.export.sum":"(Som)","datatable.export.average":"(Gemiddeld)","datatable.export.unique":"(Enkele waarde)","datatable.export.count":"(Aantal waarden)","datatable.export.countDistinct":"(Aantal unieke waarden)","datatable.export.collect":"(Lijst met waarden)","datatable.export.collectDistinct":"(Lijst met verschillende waarden)","datatable.export.yes":"Ja","datatable.export.no":"Nee","datatable.button.group":"Groeperen / Degroeperen","datatable.button.generalGroup":"Groepeer alle geselecteerde regels",
"datatable.button.basicExportCSV":"Exporteer alle regels","datatable.button.groupedExportCSV":"Exporteer alleen de gegroepeerde regels","datatable.button.showOnlyGroups":"Toon alleen de groep","datatable.button.top":"Ga naar de top"}},Messages:function(key){var translatedString=this.translateTable[this.preferedLanguage][key];if(void 0===translatedString)return key;for(var i=1;i<arguments.length;i++)translatedString=translatedString.replace("{"+(i-1)+"}",arguments[i]);return translatedString}};return udtI18n.init(),udtI18n};return constructor}]),angular.module("ultimateDataTableServices").run(["$templateCache",function($templateCache){$templateCache.put("ultimate-datatable.html",'<div name="datatable" class="datatable" ng-if="udtTable"><div ng-transclude/><div id="udt-top-{{udtTable.config.name}}"/><div udt-toolbar ng-if="udtTable.isShowToolbar()"/><div udt-messages ng-if="udtTable.config.messages.active"/><div udt-table/><div udt-toolbar-bottom ng-show="udtTable.isShowToolbarBottom()"/></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-table.html",'<div name="udt-table" class="row"><div class="col-md-12 col-lg-12"><div class="inProgress" ng-if="udtTable.config.spinner.start"><button class="btn btn-primary btn-lg"><i class="fa fa-spinner fa-spin fa-5x"></i></button></div><form name="datatableForm" class="form-inline"><table class="table table-condensed table-hover table-bordered"><thead><tr ng-repeat="(key,headers) in udtTable.getExtraHeaderConfig()"><th colspan="{{header.colspan}}" ng-repeat="header in headers" class="xheader"><span ng-bind="udtHelpers.messages.Messages(header.label)"/></th></tr><tr><th ng-if="udtTable.isShowLineEditButton()" ng-class="udtTableHelpers.getThClass(column, this)"><!-- Edit button column --></th><th id="{{column.id}}" ng-repeat="column in udtTable.getColumnsConfig()" ng-model="column" ng-if="!udtTable.isHide(column.id)" ng-class="udtTableHelpers.getThClass(column, this)"><div udt-compile="column.headerTpl" class="pull-left"></div><div class="btn-group pull-right"><button class="btn btn-xs" ng-click="udtTableFunctions.setEdit(column)"        ng-if="udtTable.isShowButton(\'edit\', column)"  ng-disabled="!udtTable.canEdit()" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.edit\')}}"><i class="fa fa-edit"></i></button><button class="btn btn-xs" ng-click="udtTableFunctions.setOrderColumn(column)" ng-if="udtTable.isShowButton(\'order\', column)" ng-disabled="!udtTable.canOrder()" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.sort\')}}"><i ng-class="udtTable.getOrderColumnClass(column.id)"></i></button><button class="btn btn-xs" ng-click="udtTableFunctions.setGroupColumn(column)" ng-if="udtTable.isShowButton(\'group\', column)" ng-disabled="udtTable.isEmpty()"  data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.group\')}}"><i ng-class="udtTable.getGroupColumnClass(column.id)"></i></button><button class="btn btn-xs" ng-click="udtTableFunctions.setHideColumn(column)"  ng-if="udtTable.isShowButton(\'hide\', column)"  data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.hide\')}}"><i class="fa fa-eye-slash"></i></button></div></th></tr></thead><tbody udt-tbody><tr ng-if="udtTable.config.filter.columnMode && !udtTable.config.edit.start" class="filter"><td ng-repeat="col in udtTable.config.columns" ng-if="!udtTable.isHide(col.id)"><div ng-if="col.showFilter" udt-cell-filter/></td></tr><tr ng-if="udtTable.isEdit()" class="editParent"><td ng-repeat="col in udtTable.config.columns" ng-if="!udtTable.isHide(col.id)"><div udt-cell-header/></td></tr><tr ng-form name="subForm{{value.line.id}}" ng-repeat="value in udtTable.displayResult" ng-click="udtTableHelpers.select(value.data, value.line)" ng-mouseover="udtTableHelpers.mouseover(value.data, value.line)" ng-mouseleave="udtTableHelpers.mouseleave(value.data, value.line)" ng-class="udtTableHelpers.getTrClass(value.data, value.line, this)"><td ng-if="udtTable.isShowLineEditButton()"><button class="btn btn-default ng-scope" ng-click="udtTable.setEdit()" ng-show="!udtTable.isEdit(null, value.line)" ng-disabled="!udtTable.canEdit()" data-toggle="tooltip" title="Edit"><i class="fa fa-edit"></i></button><button class="btn btn-default ng-scope" ng-click="udtTable.save()" ng-show="udtTable.isEdit(null, value.line)" ng-disabled="!udtTable.canSave()" data-toggle="tooltip" title="Save"><i class="fa fa-save"></i></button></td><td ng-repeat="col in udtTable.config.columns" ng-if="udtTableHelpers.isShowCell(col, $parent.$index, $index)" ng-class="udtTableHelpers.getTdClass(value.data, col, this)" rowspan="{{udtTableHelpers.getRowSpanValue($parent.$parent.$index, $parent.$index)}}"><div udt-cell/></td></tr></tbody></table></form></div><div id="udtModalImage" class="modal fade"  tabindex="-1" role="dialog"	aria-labelledby="modalImageLabel" aria-hidden="true">	<div class="modal-dialog" style="margin-left:{{udtModalImage.modalLeft}}px">		<div class="modal-content" style="width:{{udtModalImage.modalWidth+2}}px">			<div class="modal-header">				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>				<h3 class="modal-title">{{udtModalImage.modalTitle}}</h3>				</div>			<div class="modal-body" style="padding:0px">				<img src="data:image/png;base64,{{udtModalImage.modalImage}}" style="width:{{udtModalImage.modalWidth}}px; height:{{udtModalImage.modalHeight}}px;" />			</div>			<div class="modal-footer">			</div>		</div>		</div></div></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-cell.html",'<div ng-switch on="col.edit"><div ng-switch-when="true" udt-editable-cell></div><div ng-switch-default udt-cell-read></div></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-editableCell.html",'<div ng-switch on="udtTable.isEdit(col.id, value.line)"><div ng-switch-when="true" ><div udt-cell-edit></div></div><div ng-switch-default udt-cell-read></div></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-cellRead.html",'<div udt-compile="udtTbodyHelpers.getDisplayElement(col)"></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-cellEdit.html",'<div udt-compile="udtTbodyHelpers.getEditElement(col)"></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-cellFilter.html",'<div udt-compile="udtTbodyHelpers.getEditElement(col, false, true)"></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-cellHeader.html",'<div ng-if="col.edit" ng-switch on="udtTable.isEdit(col.id)"><div ng-switch-when="true" udt-compile="udtTbodyHelpers.getEditElement(col, true)"></div><div ng-switch-default></div></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-messages.html",'<div name="udt-messages" class="row"><div class="col-md-12 col-lg-12"><div ng-class="udtTable.config.messages.clazz" ng-if="udtTable.config.messages.text !== undefined"><strong>{{udtTable.config.messages.text}}</strong></div></div></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-form.html",'<div name="udt-form"  class="row"><div class="col-md-12 col-lg-12" ng-transclude/></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-toolbar.html",'<div name="udt-toolbar" class="row margin-bottom-3"><div class="col-md-12 col-lg-12"><div class="btn-toolbar pull-left" name="udt-toolbar-buttons" ng-if="udtTable.isShowToolbarButtons()"><div class="btn-group" ng-switch on="udtTable.config.select.isSelectAll"><button class="btn btn-default" ng-disabled="udtTable.isEmpty()" ng-click="udtTable.selectAll(true)" ng-show="udtTable.isShowButton(\'select\')" ng-switch-when="false" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.selectall\')}}"><i class="fa fa-check-square"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.selectall\')}}</span></button><button class="btn btn-default" ng-disabled="udtTable.isEmpty()" ng-click="udtTable.selectAll(false)" ng-show="udtTable.isShowButton(\'select\')" ng-switch-when="true" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.unselectall\')}}"><i class="fa fa-square"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.unselectall\')}}</span></button><button class="btn btn-default" ng-click="udtTableFunctions.cancel()"  ng-if="udtTable.isShowButton(\'cancel\')" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.cancel\')}}"><i class="fa fa-undo"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.cancel\')}}</span></button><button class="btn btn-default" ng-click="udtTable.show()" ng-disabled="!udtTable.isSelect()" ng-if="udtTable.isShowButton(\'show\')" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.show\')}}"><i class="fa fa-thumb-tack"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.show\')}}</span></button></div><div class="btn-group" ng-if="udtTable.isShowCRUDButtons()"><button class="btn btn-default" ng-click="udtTableFunctions.setEdit()" ng-disabled="!udtTable.canEdit()"  ng-if="udtTable.isShowButton(\'edit\')" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.edit\')}}"><i class="fa fa-edit"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.edit\')}}</span></button><button class="btn btn-default" ng-click="udtTable.save()" ng-disabled="!udtTable.canSave()" ng-if="udtTable.isShowButton(\'save\')"  data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.save\')}}" ><i class="fa fa-save"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.save\')}}</span></button><button class="btn btn-default" ng-click="udtTable.remove()" ng-disabled="!udtTable.canRemove()" ng-if="udtTable.isShowButton(\'remove\')"  data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.remove\')}}"><i class="fa fa-trash-o"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.remove\')}}</span></button></div><div class="btn-group" ng-if="udtTable.config.add.active && udtTable.config.add.showButton"><button class="btn btn-default" ng-click="udtTable.addBlankLine()" title="{{udtHelpers.messages.Messages(\'datatable.button.add\')}}"><i class="fa fa-plus"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.add\')}}</span></button></div><div class="btn-group" ng-if="udtTable.isShowExportCSVButton()" ng-switch on="udtTable.config.group.active"><button ng-switch-when="false" class="btn btn-default" ng-click="udtTableFunctions.exportCSV(\'all\')" ng-disabled="!udtTable.canExportCSV()" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.exportCSV\')}}"><i class="fa fa-file-text-o"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.basicExportCSV\')}}</span></button><button ng-switch-when="true" class="btn btn-default dropdown-toggle" data-toggle="dropdown" ng-disabled="!udtTable.canExportCSV()"  title="{{udtHelpers.messages.Messages(\'datatable.button.exportCSV\')}}"><i class="fa fa-file-text-o"></i> <span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.exportCSV\')}}</span><span class="caret"/></button><ul class="dropdown-menu" ng-switch-when="true"><li><a href="" ng-click="udtTableFunctions.exportCSV(\'all\')"><i class="fa fa-file-text-o"></i> {{udtHelpers.messages.Messages(\'datatable.button.basicExportCSV\')}}</a></li><li><a href="" ng-click="udtTableFunctions.exportCSV(\'groupsOnly\')"><i class="fa fa-file-text-o"></i> {{udtHelpers.messages.Messages(\'datatable.button.groupedExportCSV\')}}</a></li></ul></div><div class="btn-group" ng-if="udtTable.isShowButton(\'group\')"><button data-toggle="dropdown" class="btn btn-default dropdown-toggle" ng-disabled="udtTable.isEmpty()" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.group\')}}"><i class="fa fa-bars"></i> <span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.group\')}} </span><span class="caret" /></button><ul class="dropdown-menu"><li ng-repeat="column in udtTable.getGroupColumns()"><a href="" ng-click="udtTableFunctions.setGroupColumn(column)" ng-switch on="!udtTable.isGroup(column.id)"><i class="fa fa-bars" ng-switch-when="true"></i><i class="fa fa-outdent" ng-switch-when="false"></i> <span ng-bind="udtHelpers.messages.Messages(column.header)"/></a></li><li class="divider"></li><li><a href="" ng-click="udtTable.setGroupColumn(\'all\')" ng-switch on="!udtTable.isGroup(\'all\')"><i class="fa fa-bars" ng-switch-when="true"></i><i class="fa fa-outdent" ng-switch-when="false"></i> <span ng-bind="udtHelpers.messages.Messages(\'datatable.button.generalGroup\')"/></a></li><li class="dropdown-header" style="font-size:12px;color:#333"><div class="checkbox"><label><input type="checkbox" ng-model="udtTable.config.group.showOnlyGroups" ng-click="udtTableFunctions.updateShowOnlyGroups()"/>{{udtHelpers.messages.Messages(\'datatable.button.showOnlyGroups\')}}</label></div></li></ul></div><div class="btn-group" ng-if="udtTable.isShowHideButtons()"><button data-toggle="dropdown" class="btn btn-default dropdown-toggle" data-toggle="tooltip" title="{{udtHelpers.messages.Messages(\'datatable.button.hide\')}}"><i class="fa fa-eye-slash"></i> <span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.hide\')}} </span><span class="caret"></span></button><ul class="dropdown-menu"><li ng-repeat="column in udtTable.getHideColumns()"><a href="" ng-click="udtTableFunctions.setHideColumn(column)" ng-switch on="udtTable.isHide(column.id)"><i class="fa fa-eye" ng-switch-when="true"></i><i class="fa fa-eye-slash" ng-switch-when="false"></i> <span ng-bind="udtHelpers.messages.Messages(column.header)"/></a></li></ul></div><div class="btn-group" ng-if="udtTable.isShowOtherButtons() && !udtTable.config.otherButtons.complex" udt-compile="udtTable.config.otherButtons.template"></div><div style="display:inline-block; margin-left:5px" ng-if="udtTable.isShowOtherButtons() && udtTable.config.otherButtons.complex" udt-compile="udtTable.config.otherButtons.template"></div></div><div class="col-xs-2 .col-sm-3 col-md-3 col-lg-3" name="udt-toolbar-filter" ng-if="udtTable.config.filter.active === true"><div class="col-xs-12 .col-sm-6 col-md-7 col-lg-8 input-group" ng-if="udtTable.isCompactMode()"><input class="form-control input-compact" udt-change="udtTable.searchLocal(udtTable.searchTerms)" type="text" ng-model="udtTable.searchTerms.$" ng-keydown="$event.keyCode==13 ? udtTable.searchLocal(udtTable.searchTerms) : \'\'"><span class="input-group-btn"><button ng-if="udtTable.config.filter.active === true" class="btn btn-default search-button" ng-click="udtTable.searchLocal(udtTable.searchTerms)" title="{{udtHelpers.messages.Messages(\'datatable.button.searchLocal\')}}"><i class="fa fa-search"></i></button><button ng-if="udtTable.config.filter.active === true" class="btn btn-default search-button" ng-click="udtTable.searchTerms={};udtTable.searchLocal()" title="{{udtHelpers.messages.Messages(\'datatable.button.resetSearchLocal\')}}"><i class="fa fa-times"></i></button></span></div><div class="col-xs-12 .col-sm-12 col-md-12 col-lg-12 input-group" ng-if="!udtTable.isCompactMode()"><input class="form-control" utd-change="udtTable.searchLocal(udtTable.searchTerms)" type="text" ng-model="udtTable.searchTerms.$"><span class="input-group-btn"><button ng-if="udtTable.config.filter.active === true" class="btn btn-default search-button" ng-click="udtTable.searchLocal(udtTable.searchTerms)" title="{{udtHelpers.messages.Messages(\'datatable.button.searchLocal\')}}"><i class="fa fa-search"></i><span> {{udtHelpers.messages.Messages(\'datatable.button.searchLocal\')}} </span></button><button ng-if="udtTable.config.filter.active === true" class="btn btn-default search-button" ng-click="udtTable.searchTerms={};udtTable.searchLocal()" title="{{udtHelpers.messages.Messages(\'datatable.button.resetSearchLocal\')}}"><i class="fa fa-times"></i><span> {{udtHelpers.messages.Messages(\'datatable.button.resetSearchLocal\')}} </span></button></span></div></div><div class="btn-toolbar pull-right" name="udt-toolbar-results" ng-if="udtTable.isShowToolbarResults()"><button class="btn btn-info" disabled="disabled" ng-if="udtTable.config.showTotalNumberRecords">{{udtHelpers.messages.Messages(\'datatable.totalNumberRecords\', udtHelpers.getTotalNumberRecords())}}</button></div><div class="btn-toolbar pull-right" name="udt-toolbar-pagination" ng-if="udtTable.isShowToolbarPagination()"><div class="btn-group" ng-if="udtTable.isShowPagination()"><ul class="pagination"><li ng-repeat="page in udtTable.config.pagination.pageList" ng-class="page.clazz"><a href="" ng-click="udtTableFunctions.setPageNumber(page);" ng-bind="page.label"></a></li></ul></div><div class="btn-group"><button data-toggle="dropdown" class="btn btn-default dropdown-toggle">{{udtHelpers.messages.Messages(\'datatable.button.length\', udtTable.config.pagination.numberRecordsPerPage)}} <span class="caret"></span></button><ul class="dropdown-menu"><li ng-repeat="elt in udtTable.config.pagination.numberRecordsPerPageList" class={{elt.clazz}}><a href="" ng-click="udtTableFunctions.setNumberRecordsPerPage(elt)">{{elt.number}}</a></li></ul></div></div></div></div>')}]).run(["$templateCache",function($templateCache){$templateCache.put("udt-toolbar-bottom.html",'<div name="udt-toolbar-bottom" class="row margin-bottom-3"><div class="col-md-12 col-lg-12"><div class="btn-toolbar pull-right" name="udt-toolbar-pagination" ng-if="udtTable.isShowToolbarPagination()"><div class="btn-group" ng-if="udtTable.isShowPagination()"><ul class="pagination"><li ng-repeat="page in udtTable.config.pagination.pageList" ng-class="page.clazz"><a href="" ng-click="udtTableFunctions.setPageNumber(page);" ng-bind="page.label"></a></li></ul></div><button class="btn btn-default" ng-click="udtTable.goToAnchor(\'udt-top-\'+udtTable.config.name)" title="{{udtHelpers.messages.Messages(\'datatable.button.top\')}}"><i class="fa fa-chevron-up"></i><span ng-if="!udtTable.isCompactMode()"> {{udtHelpers.messages.Messages(\'datatable.button.show\')}} </span></button></div></div></div>')}]);